function callLater(e,t,r){var n=r.value,o="$isLater"+t,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];delete this[o],n.call.apply(n,[this].concat(e))},s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this[o]||(egret.callLater.apply(egret,[i,this].concat(e)),this[o]=!0)};return r.value=s,r}function callDelay(e){var t=function(t,r,n){var o=n.value,i="$isDelay"+r,s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this[i]=!1,o.call.apply(o,[this].concat(e))},a=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this[i]||(this[i]=!0,egret.setTimeout.apply(egret,[s,this,e].concat(t)))};return n.value=a,n};return t}function recycle(e){egret.BitmapData.$removeDisplayObject=function(e,t){if(t){var r=t.hashCode;if(r&&egret.BitmapData._displayList[r]){var n=egret.BitmapData._displayList[r],o=n.indexOf(e);o>=0&&n.splice(o,1),0==n.length&&RecycleMgr.ins().disposeResTime(r)}}}}function injectable(e){}function protocolsId(e){return function(t){t.prototype.protocolsId=e}}function up(e,t){var r=function(r,n,o){var i=o.value,s=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=i.call.apply(i,[this].concat(r));if("boolean"==typeof o&&!o)return!1;var s=this.getBytes(e);return o&&o instanceof Array&&this.encodeBytes(t,o,s),this.sendToServer(s),o};return o.value=s,o};return r}function down(e,t){return function(r,n,o){var i=o.value;return i.messageId=e,i.decode=t,o.value=i,o}}var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},__decorate=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=3>i?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(3>i?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},egret;!function(e){var t=function(t){function r(e,r,n){var o=t.call(this)||this;return o._target=null,o._useTicks=!1,o.ignoreGlobalPause=!1,o.loop=!1,o.pluginData=null,o._steps=null,o.paused=!1,o.duration=0,o._prevPos=-1,o.position=null,o._prevPosition=0,o._stepPosition=0,o.passive=!1,o.initialize(e,r,n),o}return __extends(r,t),r.get=function(e,t,n,o){return void 0===n&&(n=null),void 0===o&&(o=!1),o&&r.removeTweens(e),new r(e,t,n)},r.removeTweens=function(e){if(e.tween_count){for(var t=r._tweens,n=t.length-1;n>=0;n--)t[n]._target==e&&(t[n].paused=!0,t.splice(n,1));e.tween_count=0}},r.pauseTweens=function(t){if(t.tween_count)for(var r=e.Tween._tweens,n=r.length-1;n>=0;n--)r[n]._target==t&&(r[n].paused=!0)},r.resumeTweens=function(t){if(t.tween_count)for(var r=e.Tween._tweens,n=r.length-1;n>=0;n--)r[n]._target==t&&(r[n].paused=!1)},r.tick=function(e,t){void 0===t&&(t=!1);var n=e-r._lastTime;r._lastTime=e;for(var o=r._tweens.concat(),i=o.length-1;i>=0;i--){var s=o[i];t&&!s.ignoreGlobalPause||s.paused||s.$tick(s._useTicks?1:n)}return!1},r._register=function(t,n){var o=t._target,i=r._tweens;if(n)o&&(o.tween_count=o.tween_count>0?o.tween_count+1:1),i.push(t),r._inited||(r._lastTime=e.getTimer(),e.ticker.$startTick(r.tick,null),r._inited=!0);else{o&&o.tween_count--;for(var s=i.length;s--;)if(i[s]==t)return void i.splice(s,1)}},r.removeAllTweens=function(){for(var e=r._tweens,t=0,n=e.length;n>t;t++){var o=e[t];o.paused=!0,o._target.tween_count=0}e.length=0},r.prototype.initialize=function(e,t,n){this._target=e,t&&(this._useTicks=t.useTicks,this.ignoreGlobalPause=t.ignoreGlobalPause,this.loop=t.loop,t.onChange&&this.addEventListener("change",t.onChange,t.onChangeObj),t.override&&r.removeTweens(e)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],t&&t.paused?this.paused=!0:r._register(this,!0),t&&null!=t.position&&this.setPosition(t.position,r.NONE)},r.prototype.setPosition=function(e,t){void 0===t&&(t=1),0>e&&(e=0);var r=e,n=!1;if(r>=this.duration)if(this.loop){var o=r%this.duration;r=r>0&&0===o?this.duration:o}else r=this.duration,n=!0;if(r==this._prevPos)return n;n&&this.setPaused(!0);var i=this._prevPos;if(this.position=this._prevPos=r,this._prevPosition=e,this._target&&this._steps.length>0){for(var s=this._steps.length,a=-1,u=0;s>u&&!("step"==this._steps[u].type&&(a=u,this._steps[u].t<=r&&this._steps[u].t+this._steps[u].d>=r));u++);for(var u=0;s>u;u++)if("action"==this._steps[u].type)0!=t&&(this._useTicks?this._runAction(this._steps[u],r,r):1==t&&i>r?(i!=this.duration&&this._runAction(this._steps[u],i,this.duration),this._runAction(this._steps[u],0,r,!0)):this._runAction(this._steps[u],i,r));else if("step"==this._steps[u].type&&a==u){var c=this._steps[a];this._updateTargetProps(c,Math.min((this._stepPosition=r-c.t)/c.d,1))}}return this.dispatchEventWith("change"),n},r.prototype._runAction=function(e,t,r,n){void 0===n&&(n=!1);var o=t,i=r;t>r&&(o=r,i=t);var s=e.t;(s==i||s>o&&i>s||n&&s==t)&&e.f.apply(e.o,e.p)},r.prototype._updateTargetProps=function(e,t){var n,o,i,s,a,u;if(e||1!=t){if(this.passive=!!e.v,this.passive)return;e.e&&(t=e.e(t,0,1,1)),n=e.p0,o=e.p1}else this.passive=!1,n=o=this._curQueueProps;for(var c in this._initQueueProps){null==(s=n[c])&&(n[c]=s=this._initQueueProps[c]),null==(a=o[c])&&(o[c]=a=s),i=s==a||0==t||1==t||"number"!=typeof s?1==t?a:s:s+(a-s)*t;var h=!1;if(u=r._plugins[c])for(var l=0,f=u.length;f>l;l++){var g=u[l].tween(this,c,i,n,o,t,!!e&&n==o,!e);g==r.IGNORE?h=!0:i=g}h||(this._target[c]=i)}},r.prototype.setPaused=function(e){return this.paused==e?this:(this.paused=e,r._register(this,!e),this)},r.prototype._cloneProps=function(e){var t={};for(var r in e)t[r]=e[r];return t},r.prototype._addStep=function(e){return e.d>0&&(e.type="step",this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},r.prototype._appendQueueProps=function(e){var t,n,o,i,s;for(var a in e)if(void 0===this._initQueueProps[a]){if(n=this._target[a],t=r._plugins[a])for(o=0,i=t.length;i>o;o++)n=t[o].init(this,a,n);this._initQueueProps[a]=this._curQueueProps[a]=void 0===n?null:n}else n=this._curQueueProps[a];for(var a in e){if(n=this._curQueueProps[a],t=r._plugins[a])for(s=s||{},o=0,i=t.length;i>o;o++)t[o].step&&t[o].step(this,a,n,e[a],s);this._curQueueProps[a]=e[a]}return s&&this._appendQueueProps(s),this._curQueueProps},r.prototype._addAction=function(e){return e.t=this.duration,e.type="action",this._steps.push(e),this},r.prototype._set=function(e,t){for(var r in e)t[r]=e[r]},r.prototype.wait=function(e,t){if(null==e||0>=e)return this;var r=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:r,p1:r,v:t})},r.prototype.to=function(e,t,r){return void 0===r&&(r=void 0),(isNaN(t)||0>t)&&(t=0),this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:r,p1:this._cloneProps(this._appendQueueProps(e))}),this.set(e)},r.prototype.call=function(e,t,r){return void 0===t&&(t=void 0),void 0===r&&(r=void 0),this._addAction({f:e,p:r?r:[],o:t?t:this._target})},r.prototype.set=function(e,t){return void 0===t&&(t=null),this._appendQueueProps(e),this._addAction({f:this._set,o:this,p:[e,t?t:this._target]})},r.prototype.play=function(e){return e||(e=this),this.call(e.setPaused,e,[!1])},r.prototype.pause=function(e){return e||(e=this),this.call(e.setPaused,e,[!0])},r.prototype.$tick=function(e){this.paused||this.setPosition(this._prevPosition+e)},r.NONE=0,r.LOOP=1,r.REVERSE=2,r._tweens=[],r.IGNORE={},r._plugins={},r._inited=!1,r._lastTime=0,r}(e.EventDispatcher);e.Tween=t,__reflect(t.prototype,"egret.Tween")}(egret||(egret={}));var RES;!function(e){}(RES||(RES={}));var RES;!function(e){function t(t){var r=e.config.config.fileSystem.getFile(t);return r||(t=e.resourceNameSelector(t),r=e.config.config.fileSystem.getFile(t)),r}function r(e,t){var r;r=e.indexOf(".json")>=0?"legacyResourceConfig":"resourceConfig",n={type:r,root:t,url:e,name:e}}e.resourceNameSelector=function(e){return e},e.getResourceInfo=t;var n;e.setConfigURL=r;var o=function(){function r(){}return r.prototype.init=function(){return this.config||(this.config={alias:{},groups:{},resourceRoot:n.root,mergeSelector:null,fileSystem:null,loadGroup:[]}),e.queue.pushResItem(n)["catch"](function(t){return e.isCompatible||t.__resource_manager_error__||(t.error?console.error(t.error.stack):console.error(t.stack),t=new e.ResourceManagerError(1002)),e.host.remove(n),Promise.reject(t)})},r.prototype.getGroupByName=function(t){var r=this.config.groups[t],n=[];if(!r)return n;for(var o=0,i=r;o<i.length;o++){var s=i[o],a=void 0;if(a=e.config.getResourceWithSubkey(s),null!=a){var u=a.r,c=a.key;if(null==u)throw new e.ResourceManagerError(2005,c);-1==n.indexOf(u)&&n.push(u)}}return n},r.prototype.__temp__get__type__via__url=function(t){var r=this.config.alias[t];if(r||(r=t),e.typeSelector){var n=e.typeSelector(r);if(!n)throw new e.ResourceManagerError(2004,r);return n}return console.warn("RES.mapConfig 并未设置 typeSelector"),"unknown"},r.prototype.getResourceWithSubkey=function(e){e=this.getKeyByAlias(e);var t=e.indexOf("#"),r="";t>=0&&(r=e.substr(t+1),e=e.substr(0,t));var n=this.getResource(e);return n?{r:n,key:e,subkey:r}:null},r.prototype.getKeyByAlias=function(e){return this.config.alias[e]?this.config.alias[e]:e},r.prototype.getResource=function(e){var r=this.config.alias[e];r||(r=e);var n=t(r);return n?n:null},r.prototype.createGroup=function(e,t,r){if(void 0===r&&(r=!1),!r&&this.config.groups[e]||!t||0==t.length)return!1;for(var n=[],o=0,i=t;o<i.length;o++){var s=i[o];if(this.config.groups[s]){var a=this.config.groups[s];n=n.concat(a)}else n.push(s)}return this.config.groups[e]=n,!0},r.prototype.addSubkey=function(e,t){this.addAlias(e,t+"#"+e)},r.prototype.addAlias=function(e,t){this.config.alias[t]&&(t=this.config.alias[t]),this.config.alias[e]=t},r.prototype.addResourceData=function(t){e.hasRes(t.name)||(t.type||(t.type=this.__temp__get__type__via__url(t.url)),e.config.config.fileSystem.addFile(t))},r.prototype.removeResourceData=function(t){e.hasRes(t.name)&&(e.config.config.fileSystem.removeFile(t.url),this.config.alias[t.name]&&delete this.config.alias[t.name])},r}();e.ResourceConfig=o,__reflect(o.prototype,"RES.ResourceConfig")}(RES||(RES={}));var RES;!function(e){var t=function(){function t(){this.groupTotalDic={},this.numLoadedDic={},this.groupErrorDic={},this.retryTimesDic={},this.maxRetryTimes=3,this.reporterDic={},this.dispatcherDic={},this.failedList=new Array,this.loadItemErrorDic={},this.errorDic={},this.itemListPriorityDic={},this.itemLoadDic={},this.promiseHash={},this.lazyLoadList=new Array,this.loadingCount=0,this.thread=4}return t.prototype.pushResItem=function(e){if(this.promiseHash[e.root+e.name])return this.promiseHash[e.root+e.name];this.lazyLoadList.push(e),this.itemListPriorityDic[Number.NEGATIVE_INFINITY]=this.lazyLoadList,this.updatelistPriority(this.lazyLoadList,Number.NEGATIVE_INFINITY);var t=new egret.EventDispatcher;this.dispatcherDic[e.root+e.name]=t;var r=new Promise(function(e,r){t.addEventListener("complete",function(t){e(t.data)},null),t.addEventListener("error",function(e){r(e.data)},null)});return this.promiseHash[e.root+e.name]=r,this.loadNextResource(),r},t.prototype.pushResGroup=function(e,t,r,n){if(this.promiseHash[t])return this.promiseHash[t];for(var o=e.length,i=0;o>i;i++){var s=e[i];s.groupNames||(s.groupNames=[]),s.groupNames.push(t)}this.groupTotalDic[t]=e.length,this.numLoadedDic[t]=0,this.updatelistPriority(e,r),this.reporterDic[t]=n;var a=new egret.EventDispatcher;this.dispatcherDic[t]=a;var u=new Promise(function(e,t){a.addEventListener("complete",e,null),a.addEventListener("error",function(e){t(e.data)},null)});return this.promiseHash[t]=u,this.loadNextResource(),u},t.prototype.updatelistPriority=function(e,t){void 0==this.itemListPriorityDic[t]&&(this.itemListPriorityDic[t]=[]);for(var r=0,n=e;r<n.length;r++){var o=n[r];if(1!=this.itemLoadDic[o.root+o.name]){var i=this.findPriorityInDic(o);if(void 0==i)this.itemListPriorityDic[t].push(o);else if(t>i){this.itemListPriorityDic[t].push(o);var s=this.itemListPriorityDic[i].indexOf(o);this.itemListPriorityDic[i].splice(s,1)}}}},t.prototype.findPriorityInDic=function(e){for(var t in this.itemListPriorityDic)if(this.itemListPriorityDic[t].indexOf(e)>-1)return parseInt(t)},t.prototype.loadNextResource=function(){for(;this.loadingCount<this.thread;){var e=this.loadSingleResource();if(!e)break}},t.prototype.loadSingleResource=function(){var t=this,r=this.getOneResourceInfoInGroup();return r?(this.itemLoadDic[r.root+r.name]=1,this.loadingCount++,this.loadResource(r).then(function(n){if(t.loadingCount--,delete t.itemLoadDic[r.root+r.name],e.host.save(r,n),t.promiseHash[r.root+r.name]){var o=t.deleteDispatcher(r.root+r.name);o.dispatchEventWith("complete",!1,n)}var i=r.groupNames;if(i){delete r.groupNames;for(var s=0,a=i;s<a.length;s++){var u=a[s];t.setGroupProgress(u,r)&&t.loadGroupEnd(u)}}t.loadNextResource()})["catch"](function(n){if(!n)throw r.name+" load fail";if(!n.__resource_manager_error__)throw n;delete t.itemLoadDic[r.root+r.name],t.loadingCount--,delete e.host.state[r.root+r.name];var o=t.retryTimesDic[r.name]||1;if(!(o>t.maxRetryTimes))return t.retryTimesDic[r.name]=o+1,t.failedList.push(r),void t.loadNextResource();if(delete t.retryTimesDic[r.name],t.promiseHash[r.root+r.name]){var i=t.deleteDispatcher(r.root+r.name);i.dispatchEventWith("error",!1,{r:r,error:n})}var s=r.groupNames;if(s){delete r.groupNames;for(var a=0,u=s;a<u.length;a++){var c=u[a];t.loadItemErrorDic[c]||(t.loadItemErrorDic[c]=[]),-1==t.loadItemErrorDic[c].indexOf(r)&&t.loadItemErrorDic[c].push(r),t.groupErrorDic[c]=!0,t.setGroupProgress(c,r)?t.loadGroupEnd(c,n):t.errorDic[c]=n}}t.loadNextResource()}),!0):!1},t.prototype.getOneResourceInfoInGroup=function(){if(this.failedList.length>0)return this.failedList.shift();var e=Number.NEGATIVE_INFINITY;for(var t in this.itemListPriorityDic)e=Math.max(e,t);var r=this.itemListPriorityDic[e];if(r)return 0==r.length?(delete this.itemListPriorityDic[e],this.getOneResourceInfoInGroup()):r.shift()},t.prototype.setGroupProgress=function(e,t){var r=this.reporterDic[e];this.numLoadedDic[e]++;var n=this.numLoadedDic[e],o=this.groupTotalDic[e];return r&&r.onProgress&&r.onProgress(n,o,t),n==o},t.prototype.loadGroupEnd=function(e,t){delete this.groupTotalDic[e],delete this.numLoadedDic[e],delete this.reporterDic[e];var r=this.deleteDispatcher(e);if(t){delete this.groupErrorDic[e];var n=this.loadItemErrorDic[e];delete this.loadItemErrorDic[e],r.dispatchEventWith("error",!1,{itemList:n,lastError:t})}else{var o=this.groupErrorDic[e];if(delete this.groupErrorDic[e],o){var n=this.loadItemErrorDic[e];delete this.loadItemErrorDic[e];var i=this.errorDic[e];delete this.errorDic[e],r.dispatchEventWith("error",!1,{itemList:n,error:i})}else r.dispatchEventWith("complete")}},t.prototype.deleteDispatcher=function(e){delete this.promiseHash[e];var t=this.dispatcherDic[e];return delete this.dispatcherDic[e],t},t.prototype.loadResource=function(t,r){if(!r){if(1==e.FEATURE_FLAG.FIX_DUPLICATE_LOAD){var n=e.host.state[t.root+t.name];if(2==n)return Promise.resolve(e.host.get(t));if(1==n)return t.promise}r=e.processor.isSupport(t)}if(!r)throw new e.ResourceManagerError(2001,t.name,t.type);e.host.state[t.root+t.name]=1;var o=r.onLoadStart(e.host,t);return t.promise=o,o},t.prototype.unloadResource=function(t){var r=e.host.get(t);if(!r)return console.warn("尝试释放不存在的资源:",t.name),!1;var n=e.processor.isSupport(t);return n?(n.onRemoveStart(e.host,t),e.host.remove(t),1==t.extra&&e.config.removeResourceData(t),!0):!0},t}();e.ResourceLoader=t,__reflect(t.prototype,"RES.ResourceLoader")}(RES||(RES={}));var RES;!function(e){var t;!function(t){function r(e){return t._map[e.type]}function n(e,r){t._map[e]=r}function o(t,r){var n=this;return new Promise(function(o,i){var s=function(){var e=t.data?t.data:t.response;o(e)},a=function(){var t=new e.ResourceManagerError(1001,r.url);i(t)};t.addEventListener(egret.Event.COMPLETE,s,n),t.addEventListener(egret.IOErrorEvent.IO_ERROR,a,n)})}function i(e,t){if(-1!=t.indexOf("://"))return t;e=e.split("\\").join("/");var r=e.match(/#.*|\?.*/),n="";r&&(n=r[0]);var o=e.lastIndexOf("/");return e=-1!=o?e.substring(0,o+1)+t:t,e+n}function s(e){return{name:e.name+"_alpha",url:e.etc1_alpha_url,type:"ktx",root:e.root}}t.isSupport=r,t.map=n,t.getRelativePath=i,t.ImageProcessor={onLoadStart:function(t,r){var n=new egret.ImageLoader;return n.load(e.getVirtualUrl(r.root+r.url)),o(n,r).then(function(e){var n=new egret.Texture;n._setBitmapData(e);var o=t.resourceConfig.getResource(r.name);if(o&&o.scale9grid){var i=o.scale9grid.split(",");n.scale9Grid=new egret.Rectangle(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3]))}return n})},onRemoveStart:function(e,t){var r=e.get(t);r.dispose()}},t.KTXTextureProcessor={onLoadStart:function(e,t){return e.load(t,"bin").then(function(r){if(!r)return console.error("ktx:"+t.root+t.url+" is null"),null;var n=new egret.KTXContainer(r,1);if(n.isInvalid)return console.error("ktx:"+t.root+t.url+" is invalid"),null;var o=new egret.BitmapData(r);o.debugCompressedTextureURL=t.root+t.url,o.format="ktx",n.uploadLevels(o,!1);var i=new egret.Texture;i._setBitmapData(o);var s=e.resourceConfig.getResource(t.name);if(s&&s.scale9grid){var a=s.scale9grid.split(",");i.scale9Grid=new egret.Rectangle(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),parseInt(a[3]))}return e.save(t,i),i},function(r){throw e.remove(t),r})},onRemoveStart:function(e,t){var r=e.get(t);r&&r.dispose()}},t.makeEtc1SeperatedAlphaResourceInfo=s,t.ETC1KTXProcessor={onLoadStart:function(e,t){return e.load(t,"ktx").then(function(r){if(!r)return null;if(t.etc1_alpha_url){var n=s(t);return e.load(n,"ktx").then(function(t){return r&&r.$bitmapData&&t.$bitmapData?(r.$bitmapData.etcAlphaMask=t.$bitmapData,e.save(n,t)):e.remove(n),r},function(t){throw e.remove(n),t})}return r},function(r){throw e.remove(t),r})},onRemoveStart:function(e,t){var r=e.get(t);if(r&&r.dispose(),t.etc1_alpha_url){var n=s(t),o=e.get(n);o&&o.dispose(),e.unload(n)}}},t.BinaryProcessor={onLoadStart:function(t,r){var n=new egret.HttpRequest;return n.responseType=egret.HttpResponseType.ARRAY_BUFFER,n.open(e.getVirtualUrl(r.root+r.url),"get"),n.send(),o(n,r)},onRemoveStart:function(e,t){}},t.TextProcessor={onLoadStart:function(t,r){var n=new egret.HttpRequest;return n.responseType=egret.HttpResponseType.TEXT,n.open(e.getVirtualUrl(r.root+r.url),"get"),n.send(),o(n,r)},onRemoveStart:function(e,t){return!0}},t.JsonProcessor={onLoadStart:function(e,t){return e.load(t,"text").then(function(e){var t=JSON.parse(e);return t})},onRemoveStart:function(e,t){}},t.XMLProcessor={onLoadStart:function(e,t){return e.load(t,"text").then(function(e){var t=egret.XML.parse(e);return t})},onRemoveStart:function(e,t){return!0}},t.CommonJSProcessor={onLoadStart:function(t,r){return t.load(r,"text").then(function(t){var n=new Function("require","exports",t),o=function(){},i={};try{n(o,i)}catch(s){throw new e.ResourceManagerError(2003,r.name,s.message)}return i})},onRemoveStart:function(e,t){}},t.SheetProcessor={onLoadStart:function(t,r){return t.load(r,"json").then(function(n){var o=t.resourceConfig.getResource(e.nameSelector(n.file));if(!o){var s=i(r.url,n.file);o={name:s,url:s,type:"image",root:r.root}}return t.load(o).then(function(e){if(!e)return null;var r=n.frames,i=new egret.SpriteSheet(e);i.$resourceInfo=o;for(var s in r){var a=r[s],u=i.createTexture(s,a.x,a.y,a.w,a.h,a.offX,a.offY,a.sourceW,a.sourceH);if(a.scale9grid){var c=a.scale9grid,h=c.split(",");u.scale9Grid=new egret.Rectangle(parseInt(h[0]),parseInt(h[1]),parseInt(h[2]),parseInt(h[3]))}}return t.save(o,e),i},function(e){throw t.remove(o),e})})},getData:function(e,t,r,n){var o=e.get(t);return o?o.getTexture(n):null},onRemoveStart:function(e,t){var r=e.get(t),n=r.$resourceInfo;r.dispose(),e.unload(n)}};var a=function(e,t){var r="",n=t.split("\n"),o=n[2],i=o.indexOf('file="');-1!=i&&(o=o.substring(i+6),i=o.indexOf('"'),r=o.substring(0,i)),e=e.split("\\").join("/");var i=e.lastIndexOf("/");return e=-1!=i?e.substring(0,i+1)+r:r};t.FontProcessor={onLoadStart:function(t,r){return t.load(r,"text").then(function(n){var o;try{o=JSON.parse(n)}catch(s){o=n}var u;u="string"==typeof o?a(r.url,o):i(r.url,o.file);var c=t.resourceConfig.getResource(e.nameSelector(u));return c||(c={name:u,url:u,type:"image",root:r.root}),t.load(c).then(function(e){var r=new egret.BitmapFont(e,o);return r.$resourceInfo=c,t.save(c,e),r},function(e){throw t.remove(c),e})})},onRemoveStart:function(e,t){var r=e.get(t),n=r.$resourceInfo;e.unload(n)}},t.SoundProcessor={onLoadStart:function(t,r){var n=new egret.Sound;return n.load(e.getVirtualUrl(r.root+r.url)),o(n,r).then(function(){return n})},onRemoveStart:function(e,t){var r=e.get(t);r.close()}},t.MovieClipProcessor={onLoadStart:function(t,r){var n,o;return t.load(r,"json").then(function(i){n=i;var s=r.name,a=s.substring(0,s.lastIndexOf("."))+".png";if(o=t.resourceConfig.getResource(a),!o)throw new e.ResourceManagerError(1001,a);return t.load(o)}).then(function(e){t.save(o,e);var r=e,i=new egret.MovieClipDataFactory(n,r);return i})},onRemoveStart:function(e,t){var r=e.get(t);r.clearCache(),r.$spriteSheet.dispose();var n=t.name,o=n.substring(0,n.lastIndexOf("."))+".png",i=e.resourceConfig.getResource(o);i&&e.unload(i)}},t.MergeJSONProcessor={onLoadStart:function(t,r){return t.load(r,"json").then(function(t){for(var n in t)e.config.addSubkey(n,r.name);return t})},getData:function(e,t,r,n){var o=e.get(t);return o?o[n]:(console.error("missing resource :"+t.name),null)},onRemoveStart:function(e,t){}},t.TTFProcessor={onLoadStart:function(e,t){return e.load(t,"bin").then(function(e){egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(egret.sys.fontResourceCache||(egret.sys.fontResourceCache={}),egret.sys.fontResourceCache[t.root+t.url]=e)})},onRemoveStart:function(e,t){if(egret.Capabilities.runtimeType==egret.RuntimeType.WEB){var r=egret.sys.fontResourceCache;r&&r[t.url]&&(r[t.root+t.url]=null)}}},t.LegacyResourceConfigProcessor={onLoadStart:function(t,r){return t.load(r,"json").then(function(n){var o=e.config.config,i=r.root,s=o.fileSystem;s||(s={fsData:{},getFile:function(e){return f[e]},addFile:function(e){e.type||(e.type=""),void 0==i&&(e.root=""),f[e.name]=e},profile:function(){console.log(f)},removeFile:function(e){delete f[e]}},o.fileSystem=s);for(var a=o.groups,u=0,c=n.groups;u<c.length;u++){var h=c[u];""==h.keys?a[h.name]=[]:a[h.name]=h.keys.split(",")}for(var l=o.alias,f=s.fsData,g=function(e){f[e.name]=e,f[e.name].root=i,e.subkeys&&e.subkeys.split(",").forEach(function(t){l[t]=e.name+"#"+t,l[e.name+"."+t]=e.name+"#"+t})},p=0,d=n.resources;p<d.length;p++){var v=d[p];g(v)}return t.save(r,n),n})},onRemoveStart:function(){}},t._map={image:t.ImageProcessor,json:t.JsonProcessor,text:t.TextProcessor,xml:t.XMLProcessor,sheet:t.SheetProcessor,font:t.FontProcessor,bin:t.BinaryProcessor,commonjs:t.CommonJSProcessor,sound:t.SoundProcessor,movieclip:t.MovieClipProcessor,mergeJson:t.MergeJSONProcessor,legacyResourceConfig:t.LegacyResourceConfigProcessor,ktx:t.KTXTextureProcessor,"etc1.ktx":t.ETC1KTXProcessor,"pvrtc.ktx":t.KTXTextureProcessor,ttf:t.TTFProcessor}}(t=e.processor||(e.processor={}))}(RES||(RES={}));var RES;!function(e){var t;!function(t){function r(t){var r=t.name;if(e.config.config)for(var n in e.config.config.alias)e.config.config.alias[n]==t.url&&(r=n);else r=t.url;var o={name:r,url:t.url,type:t.type,data:t,root:t.root};return o}t.TYPE_XML="xml",t.TYPE_IMAGE="image",t.TYPE_BIN="bin",t.TYPE_TEXT="text",t.TYPE_JSON="json",t.TYPE_SHEET="sheet",t.TYPE_FONT="font",t.TYPE_SOUND="sound",t.TYPE_TTF="ttf",t.convertToResItem=r}(t=e.ResourceItem||(e.ResourceItem={}))}(RES||(RES={}));var RES;!function(e){e.checkNull=function(e,t,r){var n=r.value;r.value=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e[0]?n.apply(this,e):(console.warn("方法"+t+"的参数不能为null"),null)}},e.FEATURE_FLAG={FIX_DUPLICATE_LOAD:1};var t;!function(e){function t(e){r=e}var r="warning";e.setUpgradeGuideLevel=t}(t=e.upgrade||(e.upgrade={}))}(RES||(RES={}));var egret;!function(e){}(egret||(egret={}));var Tween=egret.Tween,ArrayCollection=eui.ArrayCollection;String.prototype.format=function(e){var t=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof e){for(var r in e)if(void 0!=e[r]){var n=new RegExp("({"+r+"})","g");t=t.replace(n,e[r])}}else for(var o=0;o<arguments.length;o++)if(void 0!=arguments[o]){var n=new RegExp("({)"+o+"(})","g");t=t.replace(n,arguments[o])}return t};var BasePanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.msgObject={},t._longPress=[],t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.addCustomEvent=function(e,t){var r=""+e;this.msgObject[r]=!0,EventMgr.addListener(e,t,this)},t.prototype.removeCustomEvents=function(){var e=Object.keys(this.msgObject);e&&e.length&&(EventMgr.ins().removeAll(this,e),this.msgObject={})},t.prototype.addLongPress=function(e,t){-1==this._longPress.indexOf(e.hashCode)&&(this._longPress.push(e.hashCode),LongPressUtils.ins().addLongPress(e,t,this))},t.prototype.removeLongPress=function(){for(var e=this._longPress.length,t=0;e>t;t++)LongPressUtils.ins().removeLongPress(this._longPress[t]);this._longPress.length=0},t.prototype.addEvent=function(e,t,r,n){return void 0===n&&(n=this),t?void t.addEventListener(e,r,n):void debug.error("Not binding object")},t.prototype.removeEvent=function(e,t,r,n){void 0===n&&(n=this),t&&t.removeEventListener(e,r,n)},t.prototype.addEventTouchTap=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.TOUCH_TAP,e,t,r)},t.prototype.removeEventTouchTap=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.TOUCH_TAP,e,t,r)},t.prototype.addEventTouchEnd=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.TOUCH_END,e,t,r)},t.prototype.removeEventTouchEnd=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.TOUCH_END,e,t,r)},t.prototype.addEventChange=function(e,t,r){void 0===r&&(r=this),e&&e instanceof eui.TabBar?(this.tabClickFunc=this.tabClickFunc||{},this.tabClickFunc[e.hashCode]=t,this.addEvent(egret.TouchEvent.CHANGE,e,this.onChangeTap,this)):this.addEvent(egret.TouchEvent.CHANGE,e,t,r)},t.prototype.onChangeTap=function(e){this.tabClickFunc[e.currentTarget.hashCode]&&this.tabClickFunc[e.currentTarget.hashCode].call(this,e)},t.prototype.removeEventChange=function(e,t,r){void 0===r&&(r=this),e&&e instanceof eui.TabBar?this.removeEvent(egret.TouchEvent.CHANGE,e,this.onChangeTap,this):this.removeEvent(egret.TouchEvent.CHANGE,e,t,r)},t.prototype.addEventChanging=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.CHANGING,e,t,r)},t.prototype.removeEventChanging=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.CHANGING,e,t,r)},t.prototype.addEventItemTap=function(e,t,r){void 0===r&&(r=this),this.addEvent(eui.ItemTapEvent.ITEM_TAP,e,t,r)},t.prototype.removeEventItemTap=function(e,t,r){void 0===r&&(r=this),this.removeEvent(eui.ItemTapEvent.ITEM_TAP,e,t,r)},t.prototype.addEventAddedFromStage=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.Event.ADDED_TO_STAGE,e,t,r)},t.prototype.removeEventAddedFromStage=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.Event.ADDED_TO_STAGE,e,t,r)},t.prototype.addEventRemovedFromStage=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.Event.REMOVED_FROM_STAGE,e,t,r)},t.prototype.removeEventRemovedFromStage=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.Event.REMOVED_FROM_STAGE,e,t,r)},t.prototype.addEventTextLink=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TextEvent.LINK,e,t,r)},t.prototype.removeEventTextLink=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TextEvent.LINK,e,t,r)},t.prototype.addEventFocusIn=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.FocusEvent.FOCUS_IN,e,t,r)},t.prototype.removeEventFocusIn=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.FocusEvent.FOCUS_IN,e,t,r)},t.prototype.addEventFocusOut=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.FocusEvent.FOCUS_OUT,e,t,r)},t.prototype.removeEventFocusOut=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.FocusEvent.FOCUS_OUT,e,t,r)},t.prototype.addEventTouchBegin=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,e,t,r)},t.prototype.removeEventTouchBegin=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.TOUCH_BEGIN,e,t,r)},t.prototype.addEventTouchMove=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.TOUCH_MOVE,e,t,r)},t.prototype.removeEventTouchMove=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.TOUCH_MOVE,e,t,r)},t.prototype.addEventChangeStart=function(e,t,r){void 0===r&&(r=this),this.addEvent(eui.UIEvent.CHANGE_START,e,t,r)},t.prototype.removeEventChangeStart=function(e,t,r){void 0===r&&(r=this),this.removeEvent(eui.UIEvent.CHANGE_START,e,t,r)},t.prototype.addEventChangeEnd=function(e,t,r){void 0===r&&(r=this),this.addEvent(eui.UIEvent.CHANGE_END,e,t,r)},t.prototype.removeEventChangeEnd=function(e,t,r){void 0===r&&(r=this),this.removeEvent(eui.UIEvent.CHANGE_END,e,t,r)},t.prototype.$onClose=function(){var e=function(r){for(var n=0;n<r.numChildren;n++){var o=r.getChildAt(n);o instanceof t?o.$onClose():o instanceof egret.DisplayObjectContainer&&e(o)}};e(this),this.removeCustomEvents(),this.removeLongPress()},t}(eui.Component);__reflect(BasePanel.prototype,"BasePanel",["IBaseEvent"]);var SingleClass=function(){function e(){}return e.ins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this;return this.instance||(this.instance=new(r.bind.apply(r,[void 0].concat(e)))),this.instance},e}();__reflect(SingleClass.prototype,"SingleClass");var GameByteArray=function(e){function t(){var t=e.call(this)||this;return t.endian=egret.Endian.LITTLE_ENDIAN,t}return __extends(t,e),t.prototype.writeCmd=function(e,t){this.writeByte(e),this.writeByte(t)},t.prototype.readString=function(){var e=this.readUTF();return this.position+=1,e},t.prototype.writeString=function(e){this.writeUTF(e||""),this.writeByte(0)},t.prototype.readUnsignedInt64=function(){var e=new UInt64(this),t=e.toString();return+t},t.prototype.writeUnsignedInt64=function(e){var t=UInt64.stringToUint64(e.toString());this.writeUnsignedInt(t._lowUint),this.writeUnsignedInt(t._highUint)},t}(egret.ByteArray);__reflect(GameByteArray.prototype,"GameByteArray");var BaseSound=function(){function e(){this._cache={},this._loadingCache=new Array,TimerMgr.ins().doTimer(6e4,0,this.dealSoundTimer,this)}return e.prototype.dealSoundTimer=function(){for(var e=egret.getTimer(),t=Object.keys(this._cache),r=0,n=t.length;n>r;r++){var o=t[r];this.checkCanClear(o)&&e-this._cache[o]>=18e4&&(delete this._cache[o],RES.destroyRes(o))}},e.prototype.getSound=function(e){var t=RES.getRes(e);if(t)this._cache[e]&&(this._cache[e]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(e))return null;this._loadingCache.push(e),RES.getResAsync(e,this.onResourceLoadComplete,this)}return t},e.prototype.onResourceLoadComplete=function(e,t){var r=this._loadingCache.indexOf(t);-1!=r&&(this._loadingCache.splice(r,1),this._cache[t]=egret.getTimer(),this.loadedPlay(t))},e.prototype.loadedPlay=function(e){},e.prototype.checkCanClear=function(e){return!0},e}();__reflect(BaseSound.prototype,"BaseSound");var RES;!function(e){var t=function(){function e(){}return e.prototype.init=function(){return this.versionInfo=this.getLocalData("all.manifest"),Promise.resolve()},e.prototype.getVirtualUrl=function(e){return e},e.prototype.getLocalData=function(e){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var t=egret_native.readUpdateFileSync(e);
if(null!=t)return JSON.parse(t);if(t=egret_native.readResourceFileSync(e),null!=t)return JSON.parse(t)}return null},e}();e.NativeVersionController=t,__reflect(t.prototype,"RES.NativeVersionController",["RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE&&(e.VersionController=t)}(RES||(RES={}));var RES;!function(e){function t(){e.config.config.fileSystem.profile(),console.log(r);var t=0;for(var n in r){var o=r[n];o instanceof egret.Texture&&(t+=o.$bitmapWidth*o.$bitmapHeight*4)}console.log("gpu size : "+(t/1024).toFixed(3)+"kb")}var r={};e.profile=t,e.host={state:{},get resourceConfig(){return e.config},load:function(t,r){var n="string"==typeof r?e.processor._map[r]:r;return e.queue.loadResource(t,n)},unload:function(t){return e.queue.unloadResource(t)},save:function(t,n){e.host.state[t.root+t.name]=2,delete t.promise,r[t.root+t.name]=n},get:function(e){return r[e.root+e.name]},remove:function(t){delete e.host.state[t.root+t.name],delete r[t.root+t.name]}},e.config=new e.ResourceConfig,e.queue=new e.ResourceLoader;var n=function(e){function t(r,n,o){var i=e.call(this)||this;return i.__resource_manager_error__=!0,i.name=r.toString(),i.message=t.errorMessage[r].replace("{0}",n).replace("{1}",o),i}return __extends(t,e),t.errorMessage={1001:"文件加载失败:{0}",1002:"ResourceManager 初始化失败：配置文件加载失败",2001:"{0}解析失败,不支持指定解析类型:'{1}'，请编写自定义 Processor ，更多内容请参见 https://github.com/egret-labs/resourcemanager/blob/master/docs/README.md#processor",2002:"Analyzer 相关API 在 ResourceManager 中不再支持，请编写自定义 Processor ，更多内容请参见 https://github.com/egret-labs/resourcemanager/blob/master/docs/README.md#processor",2003:"{0}解析失败,错误原因:{1}",2004:"无法找到文件类型:{0}",2005:'RES加载了不存在或空的资源组:"{0}"',2006:"资源配置文件中无法找到特定的资源:{0}"},t}(Error);e.ResourceManagerError=n,__reflect(n.prototype,"RES.ResourceManagerError")}(RES||(RES={}));var egret;!function(e){var t=function(t){function r(n,o){void 0===n&&(n=""),void 0===o&&(o=0);var i=t.call(this)||this;return i._writeMessage="",i._readMessage="",i._connected=!1,i._connecting=!1,i._isReadySend=!1,i._bytesWrite=!1,i._type=r.TYPE_STRING,i._connected=!1,i._writeMessage="",i._readMessage="",i.socket=new e.ISocket,i.socket.addCallBacks(i.onConnect,i.onClose,i.onSocketData,i.onError,i),i}return __extends(r,t),r.prototype.connect=function(e,t,r){if(!this._connecting&&!this._connected){this._connecting=!0;var n="ws://"+e+":"+t;r&&(n="wss://"+e+"/"+t),this.socket.connect(e,t,n)}},r.prototype.close=function(){this._connected&&this.socket.close()},r.prototype.onConnect=function(){this._connected=!0,this._connecting=!1,this.dispatchEventWith(e.Event.CONNECT)},r.prototype.onClose=function(t){this._connected=!1;var r=new e.Event(e.Event.CLOSE);r.data=t,this.dispatchEvent(r)},r.prototype.onError=function(t){this._connecting&&(this._connecting=!1);var r=new e.Event(e.IOErrorEvent.IO_ERROR);r.data=t,this.dispatchEvent(r)},r.prototype.onSocketData=function(t){"string"==typeof t?this._readMessage+=t:this._readByte._writeUint8Array(new Uint8Array(t)),e.ProgressEvent.dispatchProgressEvent(this,e.ProgressEvent.SOCKET_DATA)},r.prototype.flush=function(){return this._connected?(this._writeMessage&&(this.socket.send(this._writeMessage),this._writeMessage=""),this._bytesWrite&&(this.socket.send(this._writeByte.buffer),this._bytesWrite=!1,this._writeByte.clear()),void(this._isReadySend=!1)):void e.$warn(3101)},r.prototype.writeUTF=function(t){return this._connected?(this._type==r.TYPE_BINARY?(this._bytesWrite=!0,this._writeByte.writeUTF(t)):this._writeMessage+=t,void this.flush()):void e.$warn(3101)},r.prototype.readUTF=function(){var e;return this._type==r.TYPE_BINARY?(this._readByte.position=0,e=this._readByte.readUTF(),this._readByte.clear()):(e=this._readMessage,this._readMessage=""),e},r.prototype.writeBytes=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=0),this._connected?this._writeByte?(this._bytesWrite=!0,this._writeByte.writeBytes(t,r,n),void this.flush()):void e.$warn(3102):void e.$warn(3101)},r.prototype.readBytes=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=0),this._readByte?(this._readByte.position=0,this._readByte.readBytes(t,r,n),void this._readByte.clear()):void e.$warn(3102)},Object.defineProperty(r.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,t!=r.TYPE_BINARY||this._writeByte||(this._readByte=new e.ByteArray,this._writeByte=new e.ByteArray)},enumerable:!0,configurable:!0}),r.TYPE_STRING="webSocketTypeString",r.TYPE_BINARY="webSocketTypeBinary",r}(e.EventDispatcher);e.WebSocket=t,__reflect(t.prototype,"egret.WebSocket")}(egret||(egret={}));var egret;!function(e){var t;!function(t){var r=function(){function t(){this.host="",this.port=0,window.WebSocket||e.$error(3100)}return t.prototype.addCallBacks=function(e,t,r,n,o){this.onConnect=e,this.onClose=t,this.onSocketData=r,this.onError=n,this.thisObject=o},t.prototype.connect=function(e,t,r){this.host=e,this.port=t,this.socket=new window.WebSocket(r),this.socket.binaryType="arraybuffer",this._bindEvent()},t.prototype._bindEvent=function(){var e=this,t=this.socket;t.onopen=function(){e.onConnect&&e.onConnect.call(e.thisObject)},t.onclose=function(t){e.onClose&&e.onClose.call(e.thisObject,t)},t.onerror=function(t){e.onError&&e.onError.call(e.thisObject,t)},t.onmessage=function(t){e.onSocketData&&(t.data?e.onSocketData.call(e.thisObject,t.data):e.onSocketData.call(e.thisObject,t))}},t.prototype.send=function(e){this.socket.send(e)},t.prototype.close=function(){this.socket.close()},t.prototype.disconnect=function(){this.socket.disconnect&&this.socket.disconnect()},t}();t.HTML5WebSocket=r,__reflect(r.prototype,"egret.web.HTML5WebSocket",["egret.ISocket"]),e.ISocket=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t=function(){function t(){e.$error(1014)}return t.get=function(e){return-1>e&&(e=-1),e>1&&(e=1),function(t){return 0==e?t:0>e?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},t.getPowIn=function(e){return function(t){return Math.pow(t,e)}},t.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},t.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},t.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},t.sineOut=function(e){return Math.sin(e*Math.PI/2)},t.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},t.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},t.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},t.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},t.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},t.circOut=function(e){return Math.sqrt(1- --e*e)},t.circInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(e,t){var r=2*Math.PI;return function(n){if(0==n||1==n)return n;var o=t/r*Math.asin(1/e);return-(e*Math.pow(2,10*(n-=1))*Math.sin((n-o)*r/t))}},t.getElasticOut=function(e,t){var r=2*Math.PI;return function(n){if(0==n||1==n)return n;var o=t/r*Math.asin(1/e);return e*Math.pow(2,-10*n)*Math.sin((n-o)*r/t)+1}},t.getElasticInOut=function(e,t){var r=2*Math.PI;return function(n){var o=t/r*Math.asin(1/e);return(n*=2)<1?-.5*(e*Math.pow(2,10*(n-=1))*Math.sin((n-o)*r/t)):e*Math.pow(2,-10*(n-=1))*Math.sin((n-o)*r/t)*.5+1}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.backIn=t.getBackIn(1.7),t.backOut=t.getBackOut(1.7),t.backInOut=t.getBackInOut(1.7),t.elasticIn=t.getElasticIn(1,.3),t.elasticOut=t.getElasticOut(1,.3),t.elasticInOut=t.getElasticInOut(1,.3*1.5),t}();e.Ease=t,__reflect(t.prototype,"egret.Ease")}(egret||(egret={}));var RES;!function(e){var t;!function(e){function t(e){var t=e.split("/");return t.filter(function(e,r){return!!e||r==t.length-1}).join("/")}function r(e){return e.substr(e.lastIndexOf("/")+1)}function n(e){return e.substr(0,e.lastIndexOf("/"))}e.normalize=t,e.basename=r,e.dirname=n}(t=e.path||(e.path={}))}(RES||(RES={}));var egret;!function(e){var t;!function(t){function r(t){if("function"==typeof t)return t;var r=e.Ease[t];return"function"==typeof r?r:null}function n(e,t,r,n){var o=e.prototype;o.__meta__=o.__meta__||{},o.__meta__[t]=r,n&&(o.__defaultProperty__=t)}var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="",t}return __extends(t,e),t}(e.EventDispatcher);t.BasePath=o,__reflect(o.prototype,"egret.tween.BasePath");var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.props=void 0,t.duration=500,t.ease=void 0,t}return __extends(t,e),t}(o);t.To=i,__reflect(i.prototype,"egret.tween.To");var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=500,t.passive=void 0,t}return __extends(t,e),t}(o);t.Wait=s,__reflect(s.prototype,"egret.tween.Wait");var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.props=void 0,t}return __extends(t,e),t}(o);t.Set=a,__reflect(a.prototype,"egret.tween.Set");var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delta=0,t}return __extends(t,e),t}(o);t.Tick=u,__reflect(u.prototype,"egret.tween.Tick");var c=function(t){function n(){var e=t.call(this)||this;return e.isStop=!1,e}return __extends(n,t),Object.defineProperty(n.prototype,"props",{get:function(){return this._props},set:function(e){this._props=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"target",{get:function(){return this._target},set:function(e){this._target=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paths",{get:function(){return this._paths},set:function(e){this._paths=e||[]},enumerable:!0,configurable:!0}),n.prototype.play=function(e){this.tween?(this.tween.setPaused(!1),this.isStop&&void 0==e&&(e=0,this.isStop=!1),void 0!==e&&null!==e&&this.tween.setPosition(e)):this.createTween(e)},n.prototype.pause=function(){this.tween&&this.tween.setPaused(!0)},n.prototype.stop=function(){this.pause(),this.isStop=!0},n.prototype.createTween=function(t){this.tween=e.Tween.get(this._target,this._props),this._paths&&this.applyPaths(),void 0!==t&&null!==t&&this.tween.setPosition(t)},n.prototype.applyPaths=function(){for(var e=0;e<this._paths.length;e++){var t=this._paths[e];this.applyPath(t)}},n.prototype.applyPath=function(e){var t=this;e instanceof i?this.tween.to(e.props,e.duration,r(e.ease)):e instanceof s?this.tween.wait(e.duration,e.passive):e instanceof a?this.tween.set(e.props):e instanceof u&&this.tween.$tick(e.delta),this.tween.call(function(){return t.pathComplete(e)})},n.prototype.pathComplete=function(e){e.dispatchEventWith("complete"),this.dispatchEventWith("pathComplete",!1,e);var t=this._paths.indexOf(e);t>=0&&t===this._paths.length-1&&this.dispatchEventWith("complete")},n}(e.EventDispatcher);t.TweenItem=c,__reflect(c.prototype,"egret.tween.TweenItem"),n(c,"paths","Array",!0);var h=function(e){function t(){var t=e.call(this)||this;return t.completeCount=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(e){this.completeCount=0,this.registerEvent(!1),this._items=e,this.registerEvent(!0)},enumerable:!0,configurable:!0}),t.prototype.registerEvent=function(e){var t=this;this._items&&this._items.forEach(function(r){e?r.addEventListener("complete",t.itemComplete,t):r.removeEventListener("complete",t.itemComplete,t)})},t.prototype.play=function(e){if(this._items)for(var t=0;t<this._items.length;t++){var r=this._items[t];r.play(e)}},t.prototype.pause=function(){if(this._items)for(var e=0;e<this._items.length;e++){var t=this._items[e];t.pause()}},t.prototype.stop=function(){if(this._items)for(var e=0;e<this._items.length;e++){var t=this._items[e];t.stop()}},t.prototype.itemComplete=function(e){var t=e.currentTarget;this.completeCount++,this.dispatchEventWith("itemComplete",!1,t),this.completeCount===this.items.length&&(this.dispatchEventWith("complete"),this.completeCount=0)},t}(e.EventDispatcher);t.TweenGroup=h,__reflect(h.prototype,"egret.tween.TweenGroup"),n(h,"items","Array",!0)}(t=e.tween||(e.tween={}))}(egret||(egret={}));var FontCustomProcessor={onLoadStart:function(e,t){return e.load(t,"text").then(function(r){var n;try{n=JSON.parse(r)}catch(o){n=r}var i;i="string"==typeof n?RecycleMgr.ins().fontGetTexturePath(t.url,n):RES.processor.getRelativePath(t.url,n.file);var s=e.resourceConfig.getResource(RES.nameSelector(i));return s||(s={name:i,url:i,type:"image",root:t.root}),RecycleMgr.ins().fonts[s.name]=t.name,e.load(s).then(function(t){var r=new egret.BitmapFont(t,n);return r.$resourceInfo=s,e.save(s,t),r},function(t){throw e.remove(s),t})})},onRemoveStart:function(e,t){var r=e.get(t),n=r.$resourceInfo;e.unload(n)}};RES.processor.map(RES.ResourceItem.TYPE_FONT,FontCustomProcessor);var ImageCustomProcessor={onLoadStart:function(e,t){var r=this;return new Promise(function(n,o){var i=new egret.ImageLoader;i.load(RES.getVirtualUrl(t.root+t.url));var s=function(){var r=i.data?i.data:i.response,o=new egret.Texture;o._setBitmapData(r);var s=e.resourceConfig.getResource(t.name);if(s&&s.scale9grid){var a=s.scale9grid.split(",");o.scale9Grid=new egret.Rectangle(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),parseInt(a[3]))}RecycleMgr.ins().addImage(t.name,{resource:t,texture:o}),n(o)},a=function(){var e=new RES.ResourceManagerError(1001,t.url);o(e)};i.addEventListener(egret.Event.COMPLETE,s,r),i.addEventListener(egret.IOErrorEvent.IO_ERROR,a,r)})},onRemoveStart:function(e,t){RecycleMgr.ins().delImage(t.name);var r=e.get(t);r.dispose()}};RES.processor.map(RES.ResourceItem.TYPE_IMAGE,ImageCustomProcessor);var JsonCustomProcessor={onLoadStart:function(e,t){return e.load(t,"text").then(function(e){var r=JSON.parse(e);return RecycleMgr.ins().jsons[t.name]={resource:t,json:r},r})},onRemoveStart:function(e,t){delete RecycleMgr.ins().jsons[t.name]}};RES.processor.map(RES.ResourceItem.TYPE_JSON,JsonCustomProcessor);var SheetCustomProcessor={onLoadStart:function(e,t){return e.load(t,"json").then(function(r){var n=e.resourceConfig.getResource(RES.nameSelector(r.file));if(!n){var o=RES.processor.getRelativePath(t.url,r.file);n={name:o,url:o,type:"image",root:t.root}}return RecycleMgr.ins().sheets[n.name]=t.name,e.load(n).then(function(t){if(!t)return null;var o=r.frames,i=new egret.SpriteSheet(t);i.$resourceInfo=n;for(var s in o){var a=o[s],u=i.createTexture(s,a.x,a.y,a.w,a.h,a.offX,a.offY,a.sourceW,a.sourceH);if(a.scale9grid){var c=a.scale9grid.split(",");u.scale9Grid=new egret.Rectangle(parseInt(c[0]),parseInt(c[1]),parseInt(c[2]),parseInt(c[3]))}}return e.save(n,t),i},function(t){throw e.remove(n),t})})},getData:function(e,t,r,n){var o=e.get(t);return o?o.getTexture(n):null},onRemoveStart:function(e,t){var r=e.get(t),n=r.$resourceInfo;r.dispose(),e.unload(n),delete RecycleMgr.ins().jsons[t.name]}};RES.processor.map(RES.ResourceItem.TYPE_SHEET,SheetCustomProcessor);var AStar=function(){function e(){this.m_nMarkTag=0,this.grid=this.grid||new MapGrid}return e.prototype.init=function(e,t){this.grid.init(e,t);var r=0;this.m_MapCells?r=this.m_MapCells.length:this.m_MapCells=[],this.m_nCols=this.grid.mapCol,this.m_nRows=this.grid.mapRow;var n=this.m_nCols*this.m_nRows;n>this.m_MapCells.length&&(this.m_MapCells.length=n);for(var o=r;n>o;++o)this.m_MapCells[o]=new MapCell;var i,s,a,u=0;for(s=0;s<this.m_nRows;++s)for(i=0;i<this.m_nCols;++i)a=this.m_MapCells[u],a.x=i,a.y=s,a.block=this.grid.isBlock(i,s),u++},e.prototype.findPatch=function(t,r,n,o){if(t==n&&r==o)return null;if(0>t||t>=this.m_nCols||0>r||r>=this.m_nRows)return null;if(0>n||n>=this.m_nCols||0>o||o>=this.m_nRows)return null;var i=this.m_MapCells[o*this.m_nCols+n];if(!i||i.block)return null;this.reset(t,r);var s=!1,a=t,u=r,c=this.m_MapCells[u*this.m_nCols+a];c.g=0,c.LastX=-1,c.LastY=-1,c.x=a,c.y=u,c.MarkTag=this.m_nMarkTag,c.h=Math.abs(n-t)+10*Math.abs(o-r);for(var h,l,f,g,p,d,v,_;;){if(a==n&&u==o){s=!0;break}for(c.State!=MapCell.CSCLOSE&&this.closeCell(c),h=0;8>h;++h)l=a+e.NEIGHBORPOS_X_VALUES[h],f=u+e.NEIGHBORPOS_Y_VALUES[h],0>l||l>=this.m_nCols||0>f||f>=this.m_nRows||(g=this.m_MapCells[f*this.m_nCols+l],p=1&h,g.block?p||h++:(p&&(d=7==h?0:h+1,v=a+e.NEIGHBORPOS_X_VALUES[d],_=u+e.NEIGHBORPOS_Y_VALUES[d]),(!p||p&&!this.m_MapCells[_*this.m_nCols+v].block)&&(g.MarkTag!=this.m_nMarkTag||g.State==MapCell.CSNONE?(g.MarkTag=this.m_nMarkTag,g.LastX=a,g.LastY=u,g.dir=h,g.g=c.g+e.AS_MOVECOST[p],g.h=10*(Math.abs(n-l)+Math.abs(o-f)),this.openCell(g)):g.State==MapCell.CSOPEN&&g.g>c.g+e.AS_MOVECOST[p]&&(g.LastX=a,g.LastY=u,g.dir=h,g.g=c.g+e.AS_MOVECOST[p],this.reopenCell(g)))));if(c=this.m_LastOpenCell,null==c)break;a=c.x,u=c.y}if(s){for(var m=[],y=void 0;;)if(y&&y.dir==c.dir||(y=new AStarNode(c.x,c.y,c.dir),m.push(y)),c=this.m_MapCells[c.LastY*this.m_nCols+c.LastX],c.LastX<=0&&c.LastY<=0||c.MarkTag!=this.m_nMarkTag)break;return m}return null},e.prototype.reset=function(e,t){var r=this.m_MapCells[t*this.m_nCols+e];r&&(r.LastX=0,r.LastY=0,r.h=0,r.g=0,r.f=0,r.State=0,r.Prev=null,r.Next=null,r.dir=0),this.m_LastOpenCell=null,this.m_nMarkTag=this.m_nMarkTag+1},e.prototype.closeCell=function(e){e.State==MapCell.CSOPEN&&(e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),e==this.m_LastOpenCell&&(this.m_LastOpenCell=e.Prev)),e.State=MapCell.CSCLOSE},e.prototype.openCell=function(e){e.State=MapCell.CSOPEN;var t=e.h+e.g;e.f=t;var r=this.m_LastOpenCell;if(r){for(;r.f<t;){if(null==r.Prev)return r.Prev=e,e.Prev=null,void(e.Next=r);r=r.Prev}e.Prev=r,r.Next?(e.Next=r.Next,r.Next.Prev=e,r.Next=e):(e.Next=null,r.Next=e,this.m_LastOpenCell=e)}else this.m_LastOpenCell=e,e.Prev=null,e.Next=null},e.prototype.reopenCell=function(e){var t=e.h+e.g;e.f=t;var r=e.Next;if(r&&r.f>t){do r=r.Next;while(r&&r.f>t);e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),r?(e.Next=r,r.Prev?(e.Prev=r.Prev,r.Prev.Next=e):e.Prev=null,r.Prev=e):(e.Prev=this.m_LastOpenCell,e.Next=null,this.m_LastOpenCell.Next=e,this.m_LastOpenCell=e)}},e.prototype.isWalkable=function(e,t){var r=!1,n=this.grid.getNode(e,t);return n?r=!n.block:debug.error("WalkablePoint:"+e+","+t+"error!"),r},e.prototype.isAlpha=function(e,t){var r=!1,n=this.grid.getNode(e,t);return n?r=n.alpha:debug.error("AlphaPoint:"+e+","+t+"error!"),r},e.NEIGHBORPOS_X_VALUES=[0,1,1,1,0,-1,-1,-1],e.NEIGHBORPOS_Y_VALUES=[-1,-1,0,1,1,1,0,-1],e.AS_MOVECOST=[10,14],e}();__reflect(AStar.prototype,"AStar");var MapCell=function(){function e(){}return e.CSNONE=0,e.CSOPEN=1,e.CSCLOSE=2,e}();__reflect(MapCell.prototype,"MapCell");var AStarNode=function(){function e(e,t,r){this.x=e,this.y=t,this.dir=r}return e}();__reflect(AStarNode.prototype,"AStarNode");var Bresenham=function(){function e(){}return e.canThrough=function(e,t,r,n,o){var i=0,s=0,a=0,u=0,c=0,h=0,l=0,f=0,g=0,p=0,d=0,v=0,_=0,m=0,y=new Array(4);for(y[0]=0,y[1]=0,v=(o-r)/(n-t),_=o-v*n,c=n>t?1:-1,h=o>r?1:-1,i=t>>0,s=r>>0,a=n>>0,u=o>>0,l=a-i,l=(l^l>>31)-(l>>31),y[2]=f=i,y[3]=p=s,m=0;l>m;m++){for(f+=c,d=v*f+_,g=d>>0;p!=g;){if(p+=h,!e.isWalkable(f,p))return y;y[2]=f,y[3]=p}if(!e.isWalkable(f,g))return y;y[2]=f,y[3]=g}for(;p!=u;){if(p+=h,!e.isWalkable(f,p))return y;y[2]=f,y[3]=p}return y[0]=1,y},e.lineGrids=function(e,t,r,n){for(var o=function(e,t,r,n){for(var o=(n-t)/(r-e),i=n-o*r,s=r>e?1:-1,a=Math.abs(r-e),u=[],c=0;a>c;++c){var h=e+c*s>>0,l=o*h+i>>0;u.push(h),u.push(l)}if(1>=a&&Math.abs(n-t)>1){a=Math.abs(n-t);for(var f=0;a>f;++f){var h=e,l=n>t?t++:t--;(u[u.length-2]!=h||u[u.length-1]!=l)&&(u.push(h),u.push(l))}}return u[u.length-2]!=r&&u[u.length-1]!=n&&(u.push(r),u.push(n)),u},i=o(e,t,r,n),s=[],a=0;a<i.length;a+=2){var u=i[a],c=i[a+1];if(i.length>a+2){var h=i[a+2],l=i[a+3];if(Math.abs(u-h)>1||Math.abs(c-l)>1){var f=o(u,c,h,l);f.splice(0,2),f.splice(f.length-2,2),s=s.concat(f)}}}if(Math.abs(i[i.length-2]-r)>1||Math.abs(i[i.length-1]-n)>1){var f=o(i[i.length-2],i[i.length-1],r,n);f.splice(0,2),s=s.concat(f)}return i.concat(s)},e}();__reflect(Bresenham.prototype,"Bresenham");var MapGrid=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t._poolNodes=[],t}return __extends(t,e),t.prototype.init=function(e,t){this._nodes&&this.clearNodes(),this._mapCol=e.mapCol,this._mapRow=e.mapRow,this._nodes=[];for(var r,n=0;n<this._mapCol;n++){this._nodes[n]=[];for(var o=0;o<this._mapRow;o++)r=this.getGridNode(),r.data=e.datas[n*this._mapRow+o],this._nodes[n][o]=r}t&&this._nodes.reverse()},t.prototype.getGridNode=function(){return this._poolNodes.pop()||new MapNode},Object.defineProperty(t.prototype,"mapCol",{get:function(){return this._mapCol},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapRow",{get:function(){return this._mapRow},enumerable:!0,configurable:!0}),t.prototype.getNode=function(e,t){return this._nodes&&this._nodes[e]?this._nodes[e][t]:void 0},t.prototype.isBlock=function(e,t){return 0>e||e>=this._mapCol||0>t||t>=this._mapRow?!0:this._nodes[e][t].block},t.prototype.clearNodes=function(){for(var e in this._nodes)this._poolNodes=this._poolNodes.concat(this._nodes[e]),this._nodes[e].length=0;this._nodes.length=0},t}(egret.Sprite);__reflect(MapGrid.prototype,"MapGrid");var MapNode=function(){function e(){}return Object.defineProperty(e.prototype,"alpha",{get:function(){return(2&this.data)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"block",{get:function(){return(1&this.data)<=0},enumerable:!0,configurable:!0}),e}();__reflect(MapNode.prototype,"MapNode");var BaseComponent=function(e){function t(){var t=e.call(this)||this;return t.className="Must fill className",t}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged&&this.dataChanged()},enumerable:!0,configurable:!0}),t.filterKeys=["data"],t.copyKeys=["open","close"],t}(BasePanel);__reflect(BaseComponent.prototype,"BaseComponent");var BaseItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.addEvent=function(e,t,r,n){return void 0===n&&(n=this),t?void t.addEventListener(e,r,n):void debug.error("Not binding object")},t.prototype.removeEvent=function(e,t,r,n){void 0===n&&(n=this),t&&t.removeEventListener(e,r,n)},t.prototype.addEventTouchTap=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.TOUCH_TAP,e,t,r)},t.prototype.removeEventTouchTap=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.TOUCH_TAP,e,t,r)},t.prototype.addEventTouchEnd=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.TOUCH_END,e,t,r)},t.prototype.removeEventTouchEnd=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.TOUCH_END,e,t,r)},t.prototype.addEventChange=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.CHANGE,e,t,r)},t.prototype.removeEventChange=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.CHANGE,e,t,r)},t.prototype.addEventChanging=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.CHANGING,e,t,r)},t.prototype.removeEventChanging=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.CHANGING,e,t,r)},t.prototype.addEventItemTap=function(e,t,r){void 0===r&&(r=this),this.addEvent(eui.ItemTapEvent.ITEM_TAP,e,t,r)},t.prototype.removeEventItemTap=function(e,t,r){void 0===r&&(r=this),this.removeEvent(eui.ItemTapEvent.ITEM_TAP,e,t,r)},t.prototype.addEventAddedFromStage=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.Event.ADDED_TO_STAGE,e,t,r)},t.prototype.removeEventAddedFromStage=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.Event.ADDED_TO_STAGE,e,t,r)},t.prototype.addEventRemovedFromStage=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.Event.REMOVED_FROM_STAGE,e,t,r)},t.prototype.removeEventRemovedFromStage=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.Event.REMOVED_FROM_STAGE,e,t,r)},t.prototype.addEventTextLink=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TextEvent.LINK,e,t,r)},t.prototype.removeEventTextLink=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TextEvent.LINK,e,t,r)},t.prototype.addEventFocusIn=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.FocusEvent.FOCUS_IN,e,t,r)},t.prototype.removeEventFocusIn=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.FocusEvent.FOCUS_IN,e,t,r)},t.prototype.addEventFocusOut=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.FocusEvent.FOCUS_OUT,e,t,r)},t.prototype.removeEventFocusOut=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.FocusEvent.FOCUS_OUT,e,t,r)},t.prototype.addEventTouchBegin=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.TOUCH_BEGIN,e,t,r)},t.prototype.removeEventTouchBegin=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.TOUCH_BEGIN,e,t,r)},t.prototype.addEventTouchMove=function(e,t,r){void 0===r&&(r=this),this.addEvent(egret.TouchEvent.TOUCH_MOVE,e,t,r)},t.prototype.removeEventTouchMove=function(e,t,r){void 0===r&&(r=this),this.removeEvent(egret.TouchEvent.TOUCH_MOVE,e,t,r)},t.prototype.addEventChangeStart=function(e,t,r){void 0===r&&(r=this),this.addEvent(eui.UIEvent.CHANGE_START,e,t,r)},t.prototype.removeEventChangeStart=function(e,t,r){void 0===r&&(r=this),this.removeEvent(eui.UIEvent.CHANGE_START,e,t,r)},t.prototype.addEventChangeEnd=function(e,t,r){void 0===r&&(r=this),this.addEvent(eui.UIEvent.CHANGE_END,e,t,r)},t.prototype.removeEventChangeEnd=function(e,t,r){void 0===r&&(r=this),this.removeEvent(eui.UIEvent.CHANGE_END,e,t,r)},t.prototype.destruct=function(){},t}(eui.ItemRenderer);__reflect(BaseItemRender.prototype,"BaseItemRender",["IBaseEvent"]);var BaseLayer=function(e){function t(){var t=e.call(this)||this;return t.percentWidth=100,t.percentHeight=100,t.touchEnabled=!1,t}return __extends(t,e),t.prototype.setSafeArea=function(){},t}(eui.Group);__reflect(BaseLayer.prototype,"BaseLayer");var BaseLeakDisplay=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(BaseLeakDisplay.prototype,"BaseLeakDisplay");var RES;!function(e){function t(t){return e.path.basename(t).split(".").join("_")}function r(t){var r,n=t.substr(t.lastIndexOf(".")+1);switch(n){case e.ResourceItem.TYPE_XML:case e.ResourceItem.TYPE_JSON:case e.ResourceItem.TYPE_SHEET:r=n;break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":r=e.ResourceItem.TYPE_IMAGE;break;case"fnt":r=e.ResourceItem.TYPE_FONT;break;case"txt":r=e.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":r=e.ResourceItem.TYPE_SOUND;break;case"mergeJson":case"zip":case"pvr":r=n;break;case"ttf":r=e.ResourceItem.TYPE_TTF;default:r=e.ResourceItem.TYPE_BIN}return r}function n(t,r){throw new e.ResourceManagerError(2002)}function o(t){e.isCompatible=t}function i(t,r){if(r.indexOf("://")>=0){var n=r.split("://");r=n[0]+"://"+e.path.normalize(n[1]+"/"),t=t.replace(r,"")}else r=e.path.normalize(r+"/"),t=t.replace(r,"");return e.setConfigURL(t,r),b||(b=new R),s(b.loadConfig())}function s(t){return e.isCompatible?void t["catch"](function(e){}).then():t}function a(e,t,r){return void 0===t&&(t=0),s(b.loadGroup(e,t,r))}function u(e){return b.isGroupLoaded(e)}function c(t){return b.getGroupByName(t).map(function(t){return e.ResourceItem.convertToResItem(t)})}function h(e,t,r){return void 0===r&&(r=!1),b.createGroup(e,t,r)}function l(e){return b.hasRes(e)}function f(e){return b.getRes(e)}function g(e,t,r){return s(b.getResAsync.apply(b,arguments))}function p(e,t,r,n){if(void 0===n&&(n=""),!b){var o=egret.sys.tr(3200);return egret.warn(o),Promise.reject(o)}return s(b.getResByUrl(e,t,r,n))}function d(e,t){return b.destroyRes(e,t)}function v(e){b||(b=new R),b.setMaxLoadingThread(e)}function _(e){b.setMaxRetryTimes(e)}function m(e,t,r,n,o){void 0===n&&(n=!1),void 0===o&&(o=0),b||(b=new R),b.addEventListener(e,t,r,n,o)}function y(e,t,r,n){void 0===n&&(n=!1),b.removeEventListener(e,t,r,n)}function E(e){b.addResourceData(e)}function T(){return b||(b=new R),b.vcs}function S(e){b||(b=new R),b.registerVersionController(e)}function C(e){return b.vcs?b.vcs.getVirtualUrl(e):e}e.nameSelector=t,e.typeSelector=r,e.registerAnalyzer=n,e.setIsCompatible=o,e.isCompatible=!1,e.loadConfig=i,e.loadGroup=a,e.isGroupLoaded=u,e.getGroupByName=c,e.createGroup=h,e.hasRes=l,e.getRes=f,e.getResAsync=g,e.getResByUrl=p,e.destroyRes=d,e.setMaxLoadingThread=v,e.setMaxRetryTimes=_,e.addEventListener=m,e.removeEventListener=y,e.$addResourceData=E,e.getVersionController=T,e.registerVersionController=S,e.getVirtualUrl=C;var R=function(t){function r(){var r=t.call(this)||this;return r.isVcsInit=!1,r.normalLoadConfig=function(){return e.config.init().then(function(t){e.ResourceEvent.dispatchResourceEvent(r,e.ResourceEvent.CONFIG_COMPLETE)},function(t){return e.ResourceEvent.dispatchResourceEvent(r,e.ResourceEvent.CONFIG_LOAD_ERROR),Promise.reject(t)})},e.VersionController&&(r.vcs=new e.VersionController),r}return __extends(r,t),r.prototype.registerVersionController=function(e){this.vcs=e,this.isVcsInit=!1},r.prototype.loadConfig=function(){var e=this;return!this.isVcsInit&&this.vcs?(this.isVcsInit=!0,this.vcs.init().then(function(){return e.normalLoadConfig()})):this.normalLoadConfig()},r.prototype.isGroupLoaded=function(t){var r=e.config.getGroupByName(t);return r.every(function(t){return null!=e.host.get(t)})},r.prototype.getGroupByName=function(t){return e.config.getGroupByName(t)},r.prototype.loadGroup=function(t,r,n){var o=this;void 0===r&&(r=0);var i={onProgress:function(r,i,s){n&&n.onProgress&&n.onProgress(r,i,s),e.ResourceEvent.dispatchResourceEvent(o,e.ResourceEvent.GROUP_PROGRESS,t,s,r,i)}};return this._loadGroup(t,r,i).then(function(r){-1==e.config.config.loadGroup.indexOf(t)&&e.config.config.loadGroup.push(t),e.ResourceEvent.dispatchResourceEvent(o,e.ResourceEvent.GROUP_COMPLETE,t)},function(r){if(-1==e.config.config.loadGroup.indexOf(t)&&e.config.config.loadGroup.push(t),r.itemList)for(var n=r.itemList,i=n.length,s=0;i>s;s++){var a=n[s];delete a.promise,e.ResourceEvent.dispatchResourceEvent(o,e.ResourceEvent.ITEM_LOAD_ERROR,t,a)}return e.isCompatible&&console.warn(r.error.message),e.ResourceEvent.dispatchResourceEvent(o,e.ResourceEvent.GROUP_LOAD_ERROR,t),Promise.reject(r.error)})},r.prototype._loadGroup=function(t,r,n){void 0===r&&(r=0);var o=e.config.getGroupByName(t);return 0==o.length?new Promise(function(r,n){n({error:new e.ResourceManagerError(2005,t)})}):e.queue.pushResGroup(o,t,r,n)},r.prototype.createGroup=function(t,r,n){return void 0===n&&(n=!1),e.config.createGroup(t,r,n)},r.prototype.hasRes=function(t){return null!=e.config.getResourceWithSubkey(t)},r.prototype.getRes=function(t){var r=e.config.getResourceWithSubkey(t);if(r){var n=r.r,o=r.key,i=r.subkey,s=e.processor.isSupport(n);return s&&s.getData&&i?s.getData(e.host,n,o,i):e.host.get(n)}return null},r.prototype.getResAsync=function(t,r,n){var o=this,i=t,s=e.config.getResourceWithSubkey(t);if(null==s)return r&&r.call(n,null,i),Promise.reject(new e.ResourceManagerError(2006,t));var a=this.getRes(t);if(a)return r&&egret.callLater(function(){r.call(n,a,i)},this),Promise.resolve(a);var u=s.r,c=s.subkey;return e.queue.pushResItem(u).then(function(o){e.host.save(u,o);var s=e.processor.isSupport(u);return s&&s.getData&&c&&(o=s.getData(e.host,u,t,c)),r&&r.call(n,o,i),o
},function(t){return e.host.remove(u),e.ResourceEvent.dispatchResourceEvent(o,e.ResourceEvent.ITEM_LOAD_ERROR,"",u),r?(r.call(n,null,i),Promise.reject(null)):Promise.reject(t)})},r.prototype.getResByUrl=function(t,r,n,o){var i=this;void 0===o&&(o="");var s=e.config.getResource(t);if(!s&&(o||(o=e.config.__temp__get__type__via__url(t)),s={name:t,url:t,type:o,root:"",extra:1},e.config.addResourceData(s),s=e.config.getResource(t),!s))throw"never";return e.queue.pushResItem(s).then(function(t){return e.host.save(s,t),r&&s&&r.call(n,t,s.url),t},function(o){return e.host.remove(s),e.ResourceEvent.dispatchResourceEvent(i,e.ResourceEvent.ITEM_LOAD_ERROR,"",s),r?(r.call(n,null,t),Promise.reject(null)):Promise.reject(o)})},r.prototype.destroyRes=function(t,r){void 0===r&&(r=!0);var n=e.config.getGroupByName(t);if(n&&n.length>0){var o=e.config.config.loadGroup.indexOf(t);if(-1==o)return!1;if(r||1==e.config.config.loadGroup.length&&e.config.config.loadGroup[0]==t){for(var i=0,s=n;i<s.length;i++){var a=s[i];e.queue.unloadResource(a)}e.config.config.loadGroup.splice(o,1)}else{for(var u={},c=0,h=e.config.config.loadGroup;c<h.length;c++){var l=h[c];for(var f in e.config.config.groups[l]){var g=e.config.config.groups[l][f];u[g]?u[g]++:u[g]=1}}for(var p=0,d=n;p<d.length;p++){var a=d[p];u[a.name]&&1==u[a.name]&&e.queue.unloadResource(a)}e.config.config.loadGroup.splice(o,1)}return!0}var a=e.config.getResource(t);return a?e.queue.unloadResource(a):(console.warn("在内存"+t+"资源不存在"),!1)},r.prototype.setMaxLoadingThread=function(t){1>t&&(t=1),e.queue.thread=t},r.prototype.setMaxRetryTimes=function(t){t=Math.max(t,0),e.queue.maxRetryTimes=t},r.prototype.addResourceData=function(t){t.root="",e.config.addResourceData(t)},__decorate([e.checkNull],r.prototype,"hasRes",null),__decorate([e.checkNull],r.prototype,"getRes",null),__decorate([e.checkNull],r.prototype,"getResAsync",null),__decorate([e.checkNull],r.prototype,"getResByUrl",null),r}(egret.EventDispatcher);e.Resource=R,__reflect(R.prototype,"RES.Resource");var b}(RES||(RES={}));var GameMovieClip=function(e){function t(){var r=e.call(this)||this;return r._rate=1,r.pixelHitTest=!1,r.$hitTest=function(e,r){if(!this.$renderNode||!this.$visible)return null;var n=this.$getInvertedConcatenatedMatrix();if(0==n.a&&0==n.b&&0==n.c&&0==n.d)return null;var o=this.$getContentBounds(),i=n.a*e+n.c*r+n.tx,s=n.b*e+n.d*r+n.ty;if(o.contains(i,s)){if(!this.$children){var a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(i,s))return null;if(this.$mask&&!this.$mask.$hitTest(e,r))return null;if(this.pixelHitTest&&this instanceof t&&!this.hitTestPoint(e,r,!0))return null}return this}return null},r}return __extends(t,e),t.prototype.playFile=function(e,r,n,o){var i=this;if(void 0===r&&(r=1),void 0===n&&(n=null),void 0===o&&(o=!0),this.time=egret.getTimer(),this._compFun=n,this.playCount=r,this.remove=o,TimerMgr.ins().remove(this.playComp,this),this.texture&&null==this.texture.bitmapData);else if(this.name==e)return void this.createBody();this.name=e,this.texture&&t.removeDisplayObject(this,this.texture.bitmapData),this.jsonData=null,this.texture=null,RES.getResByUrl(this.name+".json",function(e,t){i.name+".json"==t&&e&&(i.jsonData=e,i.createBody())},this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(this.name+".png",function(e,r){i.name+".png"==r&&e&&(i.texture=e,i.stage&&t.addDisplayObject(i,i.texture.bitmapData),i.createBody())},this,RES.ResourceItem.TYPE_IMAGE)},t.prototype.$onAddToStage=function(r,n){e.prototype.$onAddToStage.call(this,r,n),this.texture&&t.addDisplayObject(this,this.texture.bitmapData)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.texture&&t.removeDisplayObject(this,this.texture.bitmapData)},t.prototype.createBody=function(){if(this.jsonData&&this.texture&&this.texture.bitmapData){var e=this.name.split("/"),r=e.pop(),n=this.getMcFactory();this.movieClipData=n.generateMovieClipData(r),this.name in t.originalRate||(t.originalRate[this.name]=this.movieClipData.frameRate),this.frameRate=t.originalRate[this.name]*this.rate>>0;try{this.gotoAndPlay(1,this.playCount)}catch(o){debug.error("error mc:",this.name)}if(this.visible=!0,this.playCount>0){var i=egret.getTimer()-this.time;i=this.playTime*this.playCount-i,i>0?TimerMgr.ins().doTimer(i,1,this.playComp,this):this.playComp()}this.dispatchEventWith(egret.Event.CHANGE)}},t.prototype.getMcFactory=function(){var e=this.texture.bitmapData.hashCode;if(t.factoryDic[e])return t.factoryDic[e];var r=new egret.MovieClipDataFactory;return r.mcDataSet=this.jsonData,r.texture=this.texture,t.factoryDic[e]=r,r},t.prototype.playComp=function(){this.stage&&this._compFun&&this._compFun(),this.remove&&this&&null!=this.parent&&this.parent.removeChild(this)},Object.defineProperty(t.prototype,"playTime",{get:function(){return this.movieClipData?1/this.frameRate*this.totalFrames*1e3:0},enumerable:!0,configurable:!0}),t.prototype.clearComFun=function(){this._compFun=null},t.prototype.dispose=function(){this.stop(),this.resetMovieClip(),this.clearComFun(),TimerMgr.ins().removeAll(this)},t.prototype.destroy=function(){this&&null!=this.parent&&this.parent.removeChild(this),this.dispose(),ObjectPool.push(this)},t.prototype.resetMovieClip=function(){var e=this;e.rotation=0,e.scaleX=1,e.scaleY=1,e.alpha=1,e.anchorOffsetX=0,e.anchorOffsetY=0,e.x=0,e.y=0,e.rate=1,e.$renderNode&&e.$renderNode.cleanBeforeRender(),e.$nativeDisplayObject&&e.$nativeDisplayObject.setDataToBitmapNode&&e.$nativeDisplayObject.setDataToBitmapNode(0,null,[]),e.name=null,e.jsonData=null,e.filters=null;var r=e.texture;r&&t.removeDisplayObject(e,r.bitmapData),e.texture=null,e.remove=!1,e.visible=!1,egret.Tween.removeTweens(e)},t.addDisplayObject=function(e,r){if(r){var n=r.hashCode;if(!t.displayList[n])return void(t.displayList[n]=[e]);var o=t.displayList[n];o.indexOf(e)<0&&o.push(e)}},t.removeDisplayObject=function(e,r){if(r){var n=r.hashCode;if(t.displayList[n]){var o=t.displayList[n],i=o.indexOf(e);i>=0&&o.splice(i,1),0==o.length&&(delete t.displayList[n],RecycleMgr.ins().disposeResTime(n))}}},Object.defineProperty(t.prototype,"rate",{get:function(){return this._rate*(DataCenter.ins().ClientGlobalConfig.actionSpeedRate||1)},set:function(e){this._rate=e},enumerable:!0,configurable:!0}),t.originalRate={},t.factoryDic={},t.displayList=egret.createMap(),t}(egret.MovieClip);__reflect(GameMovieClip.prototype,"GameMovieClip");var FrameSurveillance=function(e){function t(){var t=e.call(this)||this;return t.totalTick=0,t.curTime=0,t.totalTime=0,t.lastLevel=0,t.curTime=egret.getTimer(),egret.startTick(t.callBack,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.callBack=function(e){if(this.totalTick++,this.totalTime+=e-this.curTime,this.curTime=e,this.totalTime>=5e3){var t=egret.ticker.$frameRate,r=Math.min(Math.ceil(1e3*this.totalTick/this.totalTime),t);if(!this.levelInterval){this.levelInterval=[];for(var n=1;3>=n;n++)this.levelInterval.push((1-.2*n)*t>>0)}for(var o=0,n=0;n<this.levelInterval.length;n++)if(r>=this.levelInterval[n]){o=n;break}this.updateLevel(o),this.totalTick=0,this.totalTime=this.totalTime%1e3}return!1},t.prototype.updateLevel=function(e){e!=this.lastLevel&&(this.lastLevel=e,EventMgr.ins().dispatch(5,e))},t}(SingleClass);__reflect(FrameSurveillance.prototype,"FrameSurveillance");var GameSystem;!function(e){e.frameSurveillance=FrameSurveillance.ins.bind(FrameSurveillance)}(GameSystem||(GameSystem={}));var DelayOptMgr=function(e){function t(){var t=e.call(this)||this;return t._delayTime=2,t._delayOpts=[],egret.startTick(t.run,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.run=function(e){if(0==this._delayOpts.length)return!1;for(var t,r=egret.getTimer();this._delayOpts.length&&(t=this._delayOpts.shift(),t.funPara?t.fun.call(t.thisObj,t.funPara):t.fun.call(t.thisObj),t.callBack&&(void 0!=t.para?t.callBack.call(t.thisObj,t.para):t.callBack()),!(egret.getTimer()-r>this._delayTime)););return!1},t.prototype.addDelayOptFunction=function(e,t,r,n,o){this._delayOpts.push({fun:t,funPara:r,thisObj:e,callBack:n,para:o})},t.prototype.clear=function(){this._delayOpts.length=0},t}(SingleClass);__reflect(DelayOptMgr.prototype,"DelayOptMgr");var EventMgr=function(e){function t(){var t=e.call(this)||this;return t.flag=0,t.dict={},t.eVec=[],egret.startTick(t.run,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.addListener=function(e,r,n){var o=""+e;o?t.ins().addListener(o,r,n):debug.log("EventMgr.addListener error:"+egret.getQualifiedClassName(n))},t.prototype.addListener=function(e,t,r){var n=this.dict[e];n?0!=this.flag&&(this.dict[e]=n=n.concat()):this.dict[e]=n=[];for(var o=0,i=n;o<i.length;o++){var s=i[o];if(s[0]==t&&s[1]==r)return}n.push([t,r])},t.prototype.dispatch=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=""+e,o=ObjectPool.pop("EventVo");o.key=n,o.param=t,this.eVec.push(o)},t.removeListener=function(e,r,n){var o=""+e;o?t.ins().removeListener(o,r,n):debug.log("EventMgr.removeListener error:"+egret.getQualifiedClassName(n))},t.prototype.removeListener=function(e,t,r){var n=this.dict[e];if(n){0!=this.flag&&(this.dict[e]=n=n.concat());for(var o=n.length,i=0;o>i;i++)if(n[i][0]==t&&n[i][1]==r){n.splice(i,1);break}0==n.length&&(this.dict[e]=null,delete this.dict[e])}},t.prototype.removeAll=function(e,t){t||(t=Object.keys(this.dict));for(var r=0,n=t;r<n.length;r++){var o=n[r],i=this.dict[o];0!=this.flag&&(this.dict[o]=i=i.concat());for(var s=i?i.length:0,a=s-1;a>=0;a--)i[a][1]==e&&i.splice(a,1);i&&0!=i.length||(this.dict[o]=null,delete this.dict[o])}},t.prototype.run=function(e){for(var t=egret.getTimer();this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-t>5)););return!1},t.prototype.dealMsg=function(e){var t=this.dict[e.key];if(t){var r=t.length;if(0!=r){this.flag++;for(var n=0,o=t;n<o.length;n++){var i=o[n];i[0].apply(i[1],e.param)}this.flag--,e.dispose(),ObjectPool.push(e)}}},t}(SingleClass);__reflect(EventMgr.prototype,"EventMgr");var EventVo=function(){function e(){}return e.prototype.dispose=function(){this.key=null,this.param=null},e}();__reflect(EventVo.prototype,"EventVo");var LangMgr=function(){function e(){}return e.initData=function(e){if(!this.init){var t=RES.getRes(e);t&&(this.addValue(t),RES.destroyRes(e),this.init=!0)}},e.addValue=function(e){if(this.config)for(var t in e)this.config[t]=e[t];else this.config=e},e.getValueByKey=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return this.config?this.config.hasOwnProperty(e)?this.config[e].format.apply(this.config[e],t).toString():(console.warn(e,"Language not key!!!"),e.format.apply(e,t).toString()):void console.error(e,"Language data error!!!")},e.getColor=function(e){return Number(this.getValueByKey(e))},e.getValueByArr=function(e,t){var r="";for(var n in e)r+=this.getValueByKey.apply(this,[e[n]].concat(t[n]));return r},e}();__reflect(LangMgr.prototype,"LangMgr");var ObjectPool=function(){function e(){this._objs=new Array}return e.prototype.pushObj=function(e){this._objs.push(e)},e.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},e.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},e.pop=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e._content[t]||(e._content[t]=[]);var o=e._content[t];if(o.length){var i=o.pop();return i}var s=egret.getDefinitionByName(t),a=new(s.bind.apply(s,[void 0].concat(r)));return a.ObjectPoolKey=t,a},e.popWithExtraKey=function(t,r){e._content[t]||(e._content[t]=[]);var n,o=e._content[t];if(o.length)for(var i=0;i<o.length;i++)if(o[i].extraKey==r){n=o[i],o.splice(i,1);break}if(!n){var s=egret.getDefinitionByName(t);n=new s(r),n.extraKey=r,n.ObjectPoolKey=t}return n},e.push=function(t){if(null==t)return!1;var r=t.ObjectPoolKey;return!e._content[r]||e._content[r].indexOf(t)>-1?!1:(e._content[r].push(t),!0)},e.clear=function(){e._content={}},e.clearClass=function(t,r){void 0===r&&(r=null);for(var n=e._content[t];n&&n.length;){var o=n.pop();r&&o[r](),o=null}e._content[t]=null,delete e._content[t]},e.dealFunc=function(t,r){var n=e._content[t];if(null!=n){var o=0,i=n.length;for(o;i>o;o++)n[o][r]()}},e._content={},e}();__reflect(ObjectPool.prototype,"ObjectPool");var RES;!function(e){var t=function(t){function r(e,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1);var o=t.call(this,e,r,n)||this;return o.itemsLoaded=0,o.itemsTotal=0,o.groupName="",o}return __extends(r,t),r.dispatchResourceEvent=function(t,n,o,i,s,a){void 0===o&&(o=""),void 0===i&&(i=void 0),void 0===s&&(s=0),void 0===a&&(a=0);var u=egret.Event.create(r,n);u.groupName=o,i&&(u.resItem=e.ResourceItem.convertToResItem(i)),u.itemsLoaded=s,u.itemsTotal=a;var c=t.dispatchEvent(u);return egret.Event.release(u),c},r.ITEM_LOAD_ERROR="itemLoadError",r.CONFIG_COMPLETE="configComplete",r.CONFIG_LOAD_ERROR="configLoadError",r.GROUP_PROGRESS="groupProgress",r.GROUP_COMPLETE="groupComplete",r.GROUP_LOAD_ERROR="groupLoadError",r}(egret.Event);e.ResourceEvent=t,__reflect(t.prototype,"RES.ResourceEvent")}(RES||(RES={}));var SceneMgr=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.clear=function(){var e=this._currScene;e&&(e.onExit(),this._currScene=void 0)},t.prototype.runScene=function(e){if(null==e)return void debug.log("runScene:scene is null");var t=this._currScene;t&&(t.onExit(),t=void 0);var r=new e;r.onEnter(),this._currScene=r},t.prototype.getCurrScene=function(){return this._currScene},t.prototype.getSceneName=function(){return this._currScene?egret.getQualifiedClassName(this._currScene):""},t.MAIN="MainScene",t}(SingleClass);__reflect(SceneMgr.prototype,"SceneMgr");var SwitchSceneMgr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scenes=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.register=function(e){-1==this.scenes.indexOf(e)&&this.scenes.push(e)},t.prototype.unregister=function(e){var t=this.scenes.indexOf(e);t>-1&&this.scenes.splice(t,1)},t.prototype.changeScene=function(){this.onExitScene(),this.onEnterScene()},t.prototype.onEnterScene=function(){for(var e=0;e<this.scenes.length;e++){var t=this.scenes[e];t.onEnterScene()}},t.prototype.onExitScene=function(){for(var e=0;e<this.scenes.length;e++){var t=this.scenes[e];t.onExitScene()}},t}(SingleClass);__reflect(SwitchSceneMgr.prototype,"SwitchSceneMgr");var TimerMgr=function(e){function t(){var t=e.call(this)||this;return t.currHandler=null,t._handlers=[],t.nexthandles=null,t._currTime=egret.getTimer(),t._currFrame=0,egret.startTick(t.onEnterFrame,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getFrameId=function(){return this._currFrame},t.prototype.getCurrTime=function(){return this._currTime},t.binFunc=function(e,t){return SortUtils.sortDescByKey(e,t,"exeTime")},t.DeleteHandle=function(e){e.clear(),ObjectPool.push(e)},t.prototype.onEnterFrame=function(e){this._currFrame++,this._currTime=egret.getTimer();var r=0,n=this.nexthandles;if(this.nexthandles=null,n&&n.length>0){for(var o=0,i=n;o<i.length;o++){var s=i[o];s.method.call(s.methodObj),t.DeleteHandle(s)}n=null}if(this._handlers.length<=0)return!1;for(var a=this._handlers[this._handlers.length-1];a.exeTime<=this._currTime;){this.currHandler=a=this._handlers.pop(),a.method.call(a.methodObj),r=egret.getTimer(),a.exeTime=r+a.delay;var u=a.forever;if(u||(a.repeatCount>1?(a.repeatCount--,u=!0):a.onFinish&&a.onFinish.apply(a.finishObj)),u){var c=CommonUtils.searchIndex(this._handlers,a,t.binFunc);this._handlers.splice(c,0,a)}else t.DeleteHandle(a);if(r-this._currTime>5)break;if(this._handlers.length<=0)break;a=this._handlers[this._handlers.length-1]}return this.currHandler=null,DebugUtils.OpenDebug&&this.delayCheckCache(),!1},t.prototype.delayCheckCache=function(){this.checkCache()},t.prototype.checkCache=function(){for(var e={0:"TimerMgr",1:"egret.Tween"},t=function(t,r){if(t instanceof egret.DisplayObject&&!t.stage){for(var n=t,o=egret.getQualifiedClassName(t),i=[];n;){if(n.ignoreLeak)return;var s=egret.getQualifiedClassName(n);if(n instanceof egret.DisplayObject&&i.push(s),n instanceof BaseEuiView&&n!=UIMgr.ins().getView(s))break;n=n.parent}var a=o+(" Leak, type:"+e[r]+",class:"+i.join(">"));debug.error(a),ReportData.getIns().reportClientErrorLog("MemLeak",a)}},r=this._handlers.length-1;r>=0;r--){var n=this._handlers[r],o=n.methodObj;n.forever&&t(o,0)}var i=egret.Tween._tweens;if(i)for(var r=0;r<i.length;r++){var s=i[r];s.loop&&t(s._target,1)}},t.prototype.create=function(e,r,n,o,i,s,a){if(!(0>r||0>n||null==o)){var u=ObjectPool.pop("MyTimerHandler");u.forever=0==n,u.repeatCount=n,u.delay=r,u.method=o,u.methodObj=i,u.onFinish=s,u.finishObj=a,u.exeTime=e+this._currTime;var c=CommonUtils.searchIndex(this._handlers,u,t.binFunc);this._handlers.splice(c,0,u)}},t.prototype.doTimer=function(e,t,r,n,o,i){void 0===o&&(o=null),void 0===i&&(i=null),this.create(e,e,t,r,n,o,i)},t.prototype.doTimerDelay=function(e,t,r,n,o,i,s){void 0===i&&(i=null),void 0===s&&(s=null),this.create(e,t,r,n,o,i,s)},t.prototype.doNext=function(e,t){var r=ObjectPool.pop("MyTimerHandler");r.method=e,r.methodObj=t,this.nexthandles||(this.nexthandles=[]),this.nexthandles.push(r)},t.prototype.once=function(e,t,r){this.create(e,e,1,t,r,null,null)},t.prototype.loop=function(e,t,r){this.create(e,e,0,t,r,null,null)},t.prototype.remove=function(e,r){var n=this.currHandler;n&&n.method==e&&n.methodObj==r&&(n.forever=!1,n.repeatCount=0);for(var o=this._handlers.length-1;o>=0;o--){var i=this._handlers[o];i.method==e&&i.methodObj==r&&(this._handlers.splice(o,1),t.DeleteHandle(i))}},t.prototype.removeAll=function(e){var r=this.currHandler;r&&r.methodObj==e&&(r.forever=!1,r.repeatCount=0);for(var n=this._handlers.length-1;n>=0;n--){var o=this._handlers[n];o.methodObj==e&&(this._handlers.splice(n,1),t.DeleteHandle(o))}},t.prototype.isExists=function(e,t){for(var r=0,n=this._handlers;r<n.length;r++){var o=n[r];if(o.method==e&&o.methodObj==t)return!0}return!1},__decorate([callDelay(5e3)],t.prototype,"delayCheckCache",null),__decorate([callLater],t.prototype,"doNext",null),t}(SingleClass);__reflect(TimerMgr.prototype,"TimerMgr");var MyTimerHandler=function(){function e(){this.delay=0,this.forever=!1,this.repeatCount=0,this.exeTime=0}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.onFinish=null,this.finishObj=null,this.forever=!1},e}();__reflect(MyTimerHandler.prototype,"MyTimerHandler");var CRC16=function(){function e(){}return e.update=function(t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var o=0,i=0;0==n&&(n=t.length),t.position=r;for(var s=r;n>s;++s)i=255&e.CRCBitReflect(t.readByte(),8)^o>>8&16777215,i&=255,o=e.CRCTable[i]^o<<8&4294967040;return 65535&(0^e.CRCBitReflect(o,16))},e.makeCRCTable=function(){for(var t=0,r=new Array(256),n=0;256>n;++n){t=n<<8&4294967040;for(var o=0;8>o;++o)t=32768&t?t<<1&4294967294^e.POLYNOMIAL:t<<1&4294967294;r[n]=t}return r},e.CRCBitReflect=function(t,r){var n=0,o=0;r--;for(var i=0;r>=i;++i)o=r-i,1&t&&(n|=1<<o&e.DropBits[o]),t=t>>1&2147483647;return n},e.POLYNOMIAL=4129,e.CRCTable=e.makeCRCTable(),e.DropBits=[4294967295,4294967294,4294967292,4294967288,4294967280,4294967264,4294967232,4294967168,4294967040,4294966784,4294966272,4294965248,4294963200,4294959104,4294950912,4294934528],e}();__reflect(CRC16.prototype,"CRC16");var Encrypt=function(){function e(){}return e.encode=function(t,r,n){if(void 0===r&&(r=0),void 0===n&&(n=0),r>=t.length)return 0;var o=n?r+n:t.length;o>t.length&&(o=t.length),t.position=r;for(var i=r;o>i;++i){var s=t.readByte();s^=e.sKeyBuff[i%4],t.position--,t.writeByte(s)}return o-r},e.decode=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=0),e.encode(t,r,n)},e.getCRC16=function(e,t){return void 0===t&&(t=0),CRC16.update(e,0,t)},e.getCRC16ByPos=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=0),CRC16.update(e,t,r)},e.getCheckKey=function(){var t=new egret.ByteArray;t.endian=egret.Endian.LITTLE_ENDIAN,t.writeUnsignedInt(e.sKey);var r=CRC16.update(t);return r},e.getSelfSalt=function(){return e.sSelfSalt},e.getTargetSalt=function(){return e.sTargetSalt},e.setTargetSalt=function(t){e.sTargetSalt=t,e.makeKey()},e.makeSalt=function(){return Math.random()*(Date.now()/1e3)>>0},e.makeKey=function(){e.sKey=(e.sSelfSalt^e.sTargetSalt)+8254;for(var t=0;4>t;++t)e.sKeyBuff[t]=(e.sKey&255<<(t<<3))>>(t<<3)},e.sSelfSalt=e.makeSalt(),e.sKeyBuff=new Array(4),e}();__reflect(Encrypt.prototype,"Encrypt");var WatcherUtil=function(){function e(){}return e.removeFromArrayCollection=function(t){t&&t.source&&t.source.length&&e.removeFromArray(t.source)},e.removeFromArray=function(t){if(t)for(var r=0,n=t;r<n.length;r++){var o=n[r];e.removeFromObject(o)}},e.removeFromObject=function(e){if(e instanceof egret.EventDispatcher){var t=e.$getEventMap(),r=t[eui.PropertyEvent.PROPERTY_CHANGE];if(r)for(var n=r.length-1;n>=0;n--){var o=r[n];o.thisObject instanceof eui.Watcher&&(o.thisObject.unwatch(),r.splice(n,1))}}else{var i=e.__listeners__;if(i&&i.length)for(var s=0;s<i.length;s+=2){var a=i[s+1];a instanceof eui.Watcher&&(a.unwatch(),s-=2)}}},e}();__reflect(WatcherUtil.prototype,"WatcherUtil");var SocketBase=function(e){function t(){var t=e.call(this)||this;return t.pid=0,t._socketStatus=0,t.PACK_HANDLER=[],t.showLog=!1,t.catchError=!1,t.newSocket(),t.recvPack=new GameByteArray,t}return __extends(t,e),Object.defineProperty(t.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this._port},enumerable:!0,configurable:!0}),t.prototype.getSocket=function(){return this.socket},t.prototype.setOnClose=function(e,t){this.onClosedCallback=e.bind(t)},t.prototype.setOnConnected=function(e,t){this.onConnectedCallback=e.bind(t)},t.prototype.newSocket=function(){this.socket&&this.removeEvent(),this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.socket.addEventListener(egret.Event.CONNECT,this.onSocketConnected,this),this.socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketRead,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.connectError,this)},t.prototype.removeEvent=function(){this.socket.removeEventListener(egret.Event.CONNECT,this.onSocketConnected,this),this.socket.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketRead,this),this.socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.connectError,this)},t.prototype.connectSocket=function(e,t,r){void 0===r&&(r=!1),this.updateStatus(SocketConst.STATUS_CONNECTING),this._host=e,this._port=t,this.socket.connect(e,t,r)},t.prototype.onSocketConnected=function(){debug.log("Socket connected！ip:"+this._host+" port:"+this._port),this.updateStatus(SocketConst.STATUS_CHECKING);var e=Encrypt.getSelfSalt();debug.log("SendEncrypt:",e);var t=new GameByteArray;t.writeUnsignedInt(e),this.socket.writeBytes(t),this.socket.flush()},t.prototype.onSocketRead=function(e){if(this._socketStatus<SocketConst.STATUS_COMMUNICATION)return void this.sendKeyToServer();this.recvPack.clear(),this.socket.readBytes(this.recvPack,this.recvPack.length),NetCalcUtils.revBytes+=this.recvPack.length;var t=this.recvPack.readUnsignedShort();if(t==SocketConst.DEFAULT_TAG){this.recvPack.readUnsignedShort();this.recvPack.position+=4,this.processRecvPacket(this.recvPack)}},t.prototype.sendKeyToServer=function(){var e=new GameByteArray;this.socket.readBytes(e),e.position=0;var t=e.readUnsignedInt();debug.log("ReceiveEncrypt:",t),Encrypt.setTargetSalt(t);var r=Encrypt.getCheckKey();debug.log("SendSign:",r),e.position=0,e.writeShort(r),this.socket.writeBytes(e,0,2),this.recycleByte(e),this.updateStatus(SocketConst.STATUS_COMMUNICATION)},t.prototype.processRecvPacket=function(e){var t=e.readUnsignedByte(),r=e.readUnsignedByte();this.dispatch(t,r,e)},t.prototype.dispatch=function(e,t,r){if(!this.PACK_HANDLER[e]||!this.PACK_HANDLER[e][t])return void debug.log("unregistered server agreements:"+e+"-"+t);this.printSocketLog("S->C:"+e+"-"+t),NetCalcUtils.calcRevBytes(e,t,r.length);var n=this.PACK_HANDLER[e][t],o=[r];if(n[2]&&(this.catchError=!1,o=this.decodeParam(n[2],r),this.catchError)){var i="S->C["+e+"-"+t+"]->:"+o;debug.error(i),ReportData.getIns().reportClientErrorLog("SocketDown",i)}(s=n[0]).call.apply(s,[n[1]].concat(o));var s},t.prototype.encodeParam=function(e,t,r){for(var n=e.length,o=0;n>o&&!(o>=t.length);o++)if(e[o]instanceof Array){r.writeUnsignedShort(t[o].length);for(var i=0;i<t[o].length;++i)this.encodeParam(e[o],t[o][i]instanceof Array?t[o][i]:[t[o][i]],r)}else{var s=e[o],a=t[o];0==s?r.writeBoolean(a):1==s?r.writeByte(a):2==s?r.writeShort(a):3==s?r.writeInt(a):4==s?r.writeByte(a):5==s?r.writeUnsignedShort(a):6==s?r.writeUnsignedInt(a):7==s?r.writeUnsignedInt64(a):8==s?r.writeString(a?a.toString():""):9==s?r.writeFloat(a):10==s&&r.writeDouble(a)}},t.prototype.decodeParam=function(e,t){for(var r=[],n=e.length,o=0;n>o&&!(t.position>=t.length);o++)if(e[o]instanceof Array){for(var i=t.readUnsignedShort(),s=[],a=0;i>a;a++){var u=this.decodeParam(e[o],t);1==u.length?s.push(u[0]):s.push(u)}if(r.push(s),this.catchError)return r}else try{var c=e[o];if(0==c)r.push(t.readBoolean());else if(1==c)r.push(t.readByte());else if(2==c)r.push(t.readShort());else if(3==c)r.push(t.readInt());else if(4==c)r.push(t.readUnsignedByte());else if(5==c)r.push(t.readUnsignedShort());else if(6==c)r.push(t.readUnsignedInt());else if(7==c)r.push(t.readUnsignedInt64());else if(8==c)r.push(t.readString());else if(9==c)r.push(t.readFloat());else if(10==c)r.push(t.readDouble());else if(11==c){var h=t.readBoolean();if(r.push(h),h)break}}catch(l){return this.catchError=!0,r}return r},t.prototype.close=function(){this.socket&&this._host&&this._port&&(debug.log("close socket！ip:"+this._host+" port:"+this._port),this.socket.close())},t.prototype.updateStatus=function(e){if(this._socketStatus!=e){var t=this._socketStatus;this._socketStatus=e,this.onFinishCheck(e,t)}},t.prototype.recycleByte=function(e){ObjectPool.push(e)},t.prototype.getBytes=function(){var e=ObjectPool.pop(SocketConst.CLASSNAME);return e.clear(),e.writeShort(SocketConst.DEFAULT_TAG),e.writeShort(0),e.writeShort(0),e.writeShort(SocketConst.DEFAULT_CRC_KEY),e.writeUnsignedInt(this.pid++),e},t.prototype.regHandler=function(e,t,r,n,o){if(this.PACK_HANDLER[e]){if(this.PACK_HANDLER[e][t])return void debug.error("repeat agreements:"+e+"-"+t)}else this.PACK_HANDLER[e]=[];this.PACK_HANDLER[e][t]=[r,n,o]},t.prototype.sendToServer=function(e){this._socketStatus==SocketConst.STATUS_COMMUNICATION?this.sendPack(e):debug.log("socket not connected"),e.position=12,this.printSocketLog("C->S:"+e.readUnsignedByte()+"-"+e.readUnsignedByte()),this.recycleByte(e)},t.prototype.sendPack=function(e){if(null==e||0==e.length)throw new debug.error("send bytes is null!");var t=SocketConst.HEAD_SIZE;e.position=2,e.writeShort(e.length-t);var r=Encrypt.getCRC16ByPos(e,t);e.position=4,e.writeShort(r);var n=Encrypt.getCRC16(e,t);e.position=6,e.writeShort(n),Encrypt.encode(e,4,4),NetCalcUtils.sendBytes+=e.length,this.socket.writeBytes(e)},t.prototype.printSocketLog=function(e){this.showLog&&console.log(e)},t.prototype.onSocketClose=function(e){},t.prototype.connectError=function(e){},t.prototype.reLogin=function(){},t.prototype.onFinishCheck=function(e,t){},t}(SingleClass);__reflect(SocketBase.prototype,"SocketBase");var SocketConst=function(){function e(){}return e.DEFAULT_TAG=52462,e.DEFAULT_CRC_KEY=30301,e.HEAD_SIZE=8,e.STATUS_CONNECTING=1,e.STATUS_CHECKING=2,e.STATUS_COMMUNICATION=3,e.STATUS_DISCONNECT=4,e.CLASSNAME=egret.getQualifiedClassName(GameByteArray),e}();__reflect(SocketConst.prototype,"SocketConst");var UInt64=function(){function e(e){this._lowUint=0,this._highUint=0,this.value=e}return e.prototype.isEqual=function(e){return e?this._lowUint==e._lowUint&&this._highUint==e._highUint:!1},e.prototype.isGreaterThan=function(t){if(t instanceof e)return this._highUint>t._highUint||this._highUint==t._highUint&&this._lowUint>t._lowUint;var r=new e;return"string"==typeof t?(r.value=t,this.isGreaterThanOrEqual(r)):"number"==typeof t?(r.value=t.toString(),this.isGreaterThanOrEqual(r)):void 0},e.prototype.isGreaterThanOrEqual=function(t){if(t instanceof e)return this._highUint>t._highUint||this._highUint==t._highUint&&this._lowUint>=t._lowUint;var r=new e;return"string"==typeof t?(r.value=t,this.isGreaterThanOrEqual(r)):"number"==typeof t?(r.value=t.toString(),this.isGreaterThanOrEqual(r)):void 0},Object.defineProperty(e.prototype,"isZero",{get:function(){return 0==this._lowUint&&0==this._highUint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGreaterThanZero",{get:function(){return this._lowUint>0||this._highUint>0},enumerable:!0,configurable:!0}),e.prototype.writeByte=function(e){e.writeUnsignedInt(this._lowUint),e.writeUnsignedInt(this._highUint)},e.prototype.setValue=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._lowUint=e,this._highUint=t},Object.defineProperty(e.prototype,"value",{set:function(t){t instanceof egret.ByteArray?(this._lowUint=t.readUnsignedInt(),this._highUint=t.readUnsignedInt()):"string"==typeof t&&e.stringToUint64(t,10,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueByString",{set:function(e){},enumerable:!0,configurable:!0}),e.prototype.leftMove=function(t,r){void 0===r&&(r=null),r=r||this;var n=e.LeftMoveMask[t],o=n&this._lowUint;o>>>=32-t,r._lowUint=this._lowUint<<t,r._highUint=this._highUint<<t,r._highUint=r._highUint|o},e.prototype.add=function(t,r){void 0===r&&(r=null),r=r||this;var n=this._lowUint+t._lowUint;r._highUint=this._highUint+t._highUint,n>=e.MaxLowUint?(r._highUint++,r._lowUint=n-e.MaxLowUint):r._lowUint=n},e.prototype.subtraction=function(t,r){void 0===r&&(r=null),r=r||this;var n=this._lowUint-t._lowUint;r._highUint=this._highUint-t._highUint,0>n?(r._highUint--,r._lowUint=n+e.MaxLowUint):r._lowUint=n},e.prototype.scale=function(t,r){void 0===r&&(r=null),r=r||this;var n=this._lowUint*t;r._highUint=this._highUint*t,r._highUint+=Math.floor(Math.abs(n/e.MaxLowUint)),r._lowUint=n%e.MaxLowUint},e.prototype.toString=function(t){void 0===t&&(t=10);for(var r,n,o,i="",s=this._lowUint,a=this._highUint;0!=a||0!=s;)r=a%t,o=r*e.MaxLowUint+s,n=o%t,i=n+i,a=(a-r)/t,s=(o-n)/t;return i.length?i:"0"},e.stringToUint64=function(t,r,n){void 0===r&&(r=10),void 0===n&&(n=null),n=n||new e;for(var o,i,s=0,a=0,u=t.length,c=0;u>c;c++)i=parseInt(t.charAt(c)),o=s*r+i,a=a*r+Math.floor(o/e.MaxLowUint),s=o%e.MaxLowUint;return n.setValue(s,a),n},e.LeftMoveMask=[0,2147483648,1073741824,536870912,268435456,134217728,67108864,33554432,16777216,8388608,4194304,2097152,1048576,524288,262144,131072,65536,32768,16384,8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1],e.MaxLowUint=4294967296,e}();__reflect(UInt64.prototype,"UInt64");var RES;!function(e){var t=function(){function t(e){this.data=e}return t.prototype.profile=function(){console.log(this.data)},t.prototype.addFile=function(t,r){r||(r=""),t=e.path.normalize(t);var n=e.path.basename(t),o=e.path.dirname(t);this.exists(o)||this.mkdir(o);var i=this.resolve(o);i[n]={url:t,type:r}},t.prototype.getFile=function(e){var t=this.resolve(e);return t&&(t.name=e),t},t.prototype.resolve=function(t){if(""==t)return this.data;t=e.path.normalize(t);for(var r=t.split("/"),n=this.data,o=0,i=r;o<i.length;o++){var s=i[o];if(!n)return n;n=n[s]}return n},t.prototype.mkdir=function(t){t=e.path.normalize(t);for(var r=t.split("/"),n=this.data,o=0,i=r;o<i.length;o++){var s=i[o];n[s]||(n[s]={}),n=n[s]}},t.prototype.exists=function(t){if(""==t)return!0;t=e.path.normalize(t);for(var r=t.split("/"),n=this.data,o=0,i=r;o<i.length;o++){var s=i[o];if(!n[s])return!1;n=n[s]}return!0},t}();e.NewFileSystem=t,__reflect(t.prototype,"RES.NewFileSystem")}(RES||(RES={}));var SoundBg=function(e){function t(){var t=e.call(this)||this;
return t._currBg="",t}return __extends(t,e),t.prototype.stop=function(){this._currSoundChannel&&this.removeSoundChannel(this._currSoundChannel),this._currSoundChannel=null,this._currSound=null,this._currBg=""},t.prototype.play=function(e){if(this._currBg!=e){this.stop(),this._currBg=e;var t=this.getSound(e);t&&this.playSound(t)}},t.prototype.touchPlay=function(){if(this._currSoundChannel&&this._currSound){var e=this._currSoundChannel.position;this.removeSoundChannel(this._currSoundChannel),this._currSoundChannel=this._currSound.play(e,1),this.addSoundChannel(this._currSoundChannel)}},t.prototype.playSound=function(e){this._currSound=e,this._currSoundChannel=this._currSound.play(0,1),this.addSoundChannel(this._currSoundChannel)},t.prototype.onSoundComplete=function(){this._currSoundChannel&&this.removeSoundChannel(this._currSoundChannel),this.playSound(this._currSound)},t.prototype.addSoundChannel=function(e){e.volume=this._volume,e.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)},t.prototype.removeSoundChannel=function(e){e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),e.stop()},t.prototype.setVolume=function(e){this._volume=e,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},t.prototype.loadedPlay=function(e){if(this._currBg==e){var t=RES.getRes(e);if(!t)return;this.playSound(t)}},t.prototype.checkCanClear=function(e){return this._currBg!=e},t}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.play=function(e){var t=this.getSound(e);t&&this.playSound(t)},t.prototype.playSound=function(e){var t=e.play(0,1);t.volume=this._volume},t.prototype.setVolume=function(e){this._volume=e},t.prototype.loadedPlay=function(e){var t=RES.getRes(e);t&&this.playSound(t)},t}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var SoundManager=function(e){function t(){var t=e.call(this)||this;return t.bgOn=!0,t.effectOn=!0,t.bgVolume=.5,t.effectVolume=.5,t.bg=new SoundBg,t.bg.setVolume(t.bgVolume),t.effect=new SoundEffects,t.effect.setVolume(t.effectVolume),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.playEffect=function(e){this.effectOn&&this.effect.play(e)},t.prototype.playBg=function(e){this.currBg=e,this.bgOn&&this.bg.play(e)},t.prototype.stopBg=function(){this.bg.stop()},t.prototype.touchBg=function(){egret.Capabilities.isMobile&&"iOS"==egret.Capabilities.os&&this.bg.touchPlay()},t.prototype.setEffectOn=function(e){this.effectOn=e},t.prototype.setBgOn=function(e){this.bgOn=e,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg()},t.prototype.setBgVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.bgVolume=e,this.bg.setVolume(this.bgVolume)},t.prototype.getBgVolume=function(){return this.bgVolume},t.prototype.setEffectVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.effectVolume=e,this.effect.setVolume(this.effectVolume)},t.prototype.getEffectVolume=function(){return this.effectVolume},t}(SingleClass);__reflect(SoundManager.prototype,"SoundManager");var Base64=function(){function e(){}return e.base64encode=function(e){var t,r,n,o,i,s;for(n=e.length,r=0,t="";n>r;){if(o=255&e.charCodeAt(r++),r==n){t+=this.base64EncodeChars.charAt(o>>2),t+=this.base64EncodeChars.charAt((3&o)<<4),t+="==";break}if(i=e.charCodeAt(r++),r==n){t+=this.base64EncodeChars.charAt(o>>2),t+=this.base64EncodeChars.charAt((3&o)<<4|(240&i)>>4),t+=this.base64EncodeChars.charAt((15&i)<<2),t+="=";break}s=e.charCodeAt(r++),t+=this.base64EncodeChars.charAt(o>>2),t+=this.base64EncodeChars.charAt((3&o)<<4|(240&i)>>4),t+=this.base64EncodeChars.charAt((15&i)<<2|(192&s)>>6),t+=this.base64EncodeChars.charAt(63&s)}return t},e.base64decode=function(e){var t,r,n,o,i,s,a;for(s=e.length,i=0,a="";s>i;){do t=this.base64DecodeChars[255&e.charCodeAt(i++)];while(s>i&&-1==t);if(-1==t)break;do r=this.base64DecodeChars[255&e.charCodeAt(i++)];while(s>i&&-1==r);if(-1==r)break;a+=String.fromCharCode(t<<2|(48&r)>>4);do{if(n=255&e.charCodeAt(i++),61==n)return a;n=this.base64DecodeChars[n]}while(s>i&&-1==n);if(-1==n)break;a+=String.fromCharCode((15&r)<<4|(60&n)>>2);do{if(o=255&e.charCodeAt(i++),61==o)return a;o=this.base64DecodeChars[o]}while(s>i&&-1==o);if(-1==o)break;a+=String.fromCharCode((3&n)<<6|o)}return a},e.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],e}();__reflect(Base64.prototype,"Base64");var BezierWarp=function(){function e(e,t){this._fromPoint=e,this._toPoint=t}return e.pop=function(t,r){var n=null;return this._pool.length?(n=this._pool.pop(),n.fromPoint=t,n.toPoint=r):n=new e(t,r),n},e.push=function(e){e&&(e.display=null,e.ease=null,e.fromPoint=null,e.toPoint=null,e.centerPoint=null,this._pool.push(e))},Object.defineProperty(e.prototype,"fromPoint",{set:function(e){this._fromPoint=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toPoint",{set:function(e){this._toPoint=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{set:function(e){this._display=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ease",{set:function(e){this._ease=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{set:function(e){this._centerPoint=e},enumerable:!0,configurable:!0}),e.prototype.start=function(e,t,r,n){var o=this;void 0===n&&(n=0),egret.Tween.get(this).wait(n).to({factor:1},e,this._ease).call(function(){egret.Tween.removeTweens(o),t&&t.call(r)})},Object.defineProperty(e.prototype,"factor",{get:function(){return 0},set:function(e){this._display.x=(1-e)*(1-e)*this._fromPoint.x+2*e*(1-e)*this._centerPoint.x+e*e*this._toPoint.x,this._display.y=(1-e)*(1-e)*this._fromPoint.y+2*e*(1-e)*this._centerPoint.y+e*e*this._toPoint.y},enumerable:!0,configurable:!0}),e._pool=[],e}();__reflect(BezierWarp.prototype,"BezierWarp");var ColorUtils=function(){function e(){}return e.getColorcChinese=function(e){return LangMgr.getValueByKey("colorcChinese"+e)},Object.defineProperty(e,"BLACK",{get:function(){return LangMgr.getColor("black")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ALPHA",{get:function(){return LangMgr.getColor("alpha")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RED",{get:function(){return LangMgr.getColor("red")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GREEN",{get:function(){return LangMgr.getColor("green")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BLUE",{get:function(){return LangMgr.getColor("blue")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"YELLOW",{get:function(){return LangMgr.getColor("yellow")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GRAY",{get:function(){return LangMgr.getColor("gray")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NORMAL_COLOR",{get:function(){return LangMgr.getColor("normalColor")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WHITE_COLOR",{get:function(){return LangMgr.getValueByKey("whiteColor")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RED_COLOR",{get:function(){return LangMgr.getValueByKey("redColor")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GREEN_COLOR",{get:function(){return LangMgr.getValueByKey("greenColor")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GRAY_COLOR",{get:function(){return LangMgr.getValueByKey("grayColor")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ATTR_DEFAULT_COLOR",{get:function(){return LangMgr.getColor("attrDefaultColor")},enumerable:!0,configurable:!0}),e}();__reflect(ColorUtils.prototype,"ColorUtils");var CommonUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.addLableStrokeColor=function(e,t,r){e.strokeColor=t,e.stroke=r},t.getObjectLength=function(e){var t=0;for(var r in e)t++;return t},t.getObjectByAttr=function(e,t,r){for(var n in e)if(e[n][t]==r)return e[n];return null},t.getObjectByUnionAttr=function(e,t,r){for(var n in e)if(n==t.toString())for(var o in e[n])if(o==r.toString())return e[n][o];return null},t.copyDataHandler=function(e){var t;if(e instanceof Array)t=[];else{if(!(e instanceof Object))return e;t={}}for(var r=Object.keys(e),n=0,o=r.length;o>n;n++){var i=r[n];t[i]=this.copyDataHandler(e[i])}return t},t.copyDataDepth=function(e){var t;if(!(e instanceof Object))return e;var r=egret.getQualifiedClassName(e);if(r)try{var n=egret.getDefinitionByName(r);t=n&&n.constructor?new n:{}}catch(o){t={}}else t={};for(var i=Object.keys(e),s=i.length,a=0;s>a;a++){var u=i[a];"function"!=typeof e[u]&&(t[u]=this.copyDataDepth(e[u]))}return t},t.objectToArray=function(e){return e instanceof Object?(e=this.copyDataHandler(e),this.objectToArrayShallow(e)):e},t.objectToArrayShallow=function(e){if(e instanceof Object){var t=[];for(var r in e)null!=e[r]&&t.push(e[r]);return t}return e},t.arraySort=function(e,t,r){return void 0===r&&(r=0),e.sort(function(e,n){return SortUtils.sortByKey(e,n,t,r)}),e},t.lock=function(){StageUtils.ins().getStage().touchEnabled=StageUtils.ins().getStage().touchChildren=!1},t.unlock=function(){StageUtils.ins().getStage().touchEnabled=StageUtils.ins().getStage().touchChildren=!0},t.labelIsOverLenght=function(e,t){e.text=this.overLength(t)},t.overLength=function(e){var t=null;return 1e5>e?t=Math.floor(e)+"":e>1e8?(e/=1e8,e=Math.floor(10*e)/10,t=LangMgr.getValueByKey("shopWan1",e)):(e/=1e4,e=Math.floor(10*e)/10,t=LangMgr.getValueByKey("shopWan",e)),t},t.overLengthChange=function(e){var t=null;return 1e4>e?t=Math.floor(e)+"":e>1e8?(e/=1e8,e=Math.floor(10*e)/10,t=LangMgr.getValueByKey("shopWan1",e)):(e/=1e4,e=Math.floor(10*e)/10,t=LangMgr.getValueByKey("shopWan",e)),t},t.overLengthNo=function(e){var t=null;return 1e4>e?t=Math.floor(e)+"":e>1e8?(e/=1e8,e=Math.floor(10*e)/10,t=LangMgr.getValueByKey("shopWan1",e)):(e/=1e4,e=Math.floor(10*e)/10,t=LangMgr.getValueByKey("shopWan",e)),t},t.getImgBase64Data=function(e){var t=new egret.RenderTexture;t.drawToTexture(e);t.toDataURL("image/png")},t.searchIndex=function(e,t,r){if(!e||0==e.length)return 0;r||(r=SortUtils.sortDescByKey);for(var n=0,o=e.length-1;o>=n;){var i=o+n>>1,s=e[i];r(s,t)<=0?n=i+1:o=i-1}return n},t}(SingleClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateStyle=function(){function e(e,t,r,n){this.format=[],this.from=0,this.to=0,this.isFormatNum=!1,this.format=e,this.from=t,this.to=r,this.isFormatNum=n}return e}();__reflect(DateStyle.prototype,"DateStyle");var DateUtils=function(){function e(){}return Object.defineProperty(e,"FORMAT_1",{get:function(){return this.format_1_value||(this.format_1_value=[LangMgr.getValueByKey("activitSS"),LangMgr.getValueByKey("activitMine",""),LangMgr.getValueByKey("dateType1"),LangMgr.getValueByKey("activitDay",""),LangMgr.getValueByKey("activitMonth"),LangMgr.getValueByKey("dateType2")]),this.format_1_value},enumerable:!0,configurable:!0}),Object.defineProperty(e,"STYLE_1",{get:function(){return this.style_1_value||(this.style_1_value=new DateStyle(e.FORMAT_1,e.TO_SECOND,e.TO_HOUR,!1)),this.style_1_value},enumerable:!0,configurable:!0}),Object.defineProperty(e,"STYLE_2",{get:function(){return this.style_2_value||(this.style_2_value=new DateStyle(e.FORMAT_1,e.TO_SECOND,e.TO_DAY,!1)),this.style_2_value},enumerable:!0,configurable:!0}),Object.defineProperty(e,"STYLE_4",{get:function(){return this.style_4_value||(this.style_4_value=new DateStyle(e.FORMAT_1,e.TO_SECOND,e.TO_MINUTE,!0)),this.style_4_value},enumerable:!0,configurable:!0}),e.getFormatTimeByStyle=function(t,r){if(void 0===r&&(r=e.STYLE_1),0>t&&(t=0),r.from>r.to)return"";t>>=0;for(var n="",o=r.to;o>=r.from;o--){var i=t/this.mul[o],s="";o!=r.to&&(i%=this.mod[o]),s=r.isFormatNum&&10>i?"0"+(i>>0).toString():(i>>0).toString(),n+=s+r.format[o]}return n},e.getFormatTimeByStyle1=function(t,r){return void 0===r&&(r=e.STYLE_1),this.getFormatTimeByStyle(t/this.MS_PER_SECOND)},e.formatMiniDateTime=function(t){return e.MINI_DATE_TIME_BASE+(2147483647&t)*e.MS_PER_SECOND},e.formatServerTime=function(t){return(t-e.MINI_DATE_TIME_BASE)/e.MS_PER_SECOND},e.getFormatBySecond=function(e,t,r,n){void 0===t&&(t=1),void 0===r&&(r=2),void 0===n&&(n=!0);var o="",i=1e3*e;switch(t){case this.TIME_FORMAT_1:o=this.format_1(i);break;case this.TIME_FORMAT_2:o=this.format_2(i);break;case this.TIME_FORMAT_3:o=this.format_3(i);break;case this.TIME_FORMAT_4:o=this.format_4(i);break;case this.TIME_FORMAT_5:o=this.format_5(i,r,n);break;case this.TIME_FORMAT_6:o=this.format_6(i);break;case this.TIME_FORMAT_7:o=this.format_7(i);break;case this.TIME_FORMAT_8:o=this.format_8(i);break;case this.TIME_FORMAT_9:o=this.format_9(i);break;case this.TIME_FORMAT_10:o=this.format_10(i);break;case this.TIME_FORMAT_11:o=this.format_11(i);break;case this.TIME_FORMAT_12:o=this.format_12(i);break;case this.TIME_FORMAT_13:o=this.format_13(i);break;case this.TIME_FORMAT_14:o=this.format_14(i);break;case this.TIME_FORMAT_15:o=this.format_15(i);break;case this.TIME_FORMAT_16:o=this.format_16(i);break;case this.TIME_FORMAT_17:o=this.format_17(i);break;case this.TIME_FORMAT_19:o=this.format_19(e);break;case this.TIME_FORMAT_20:o=this.format_20(e)}return o},e.getRenainSecond=function(t){var r=t?new Date(t):new Date,n=e.getTodayZeroSecond(r)+86400-r.getTime()/1e3;return n.toFixed(0)},e.getTodayPassedSecond=function(){var e=new Date,t=((Date.now()-new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime())/1e3).toFixed(0);return parseInt(t)},e.getTodayZeroSecond=function(e){var t=e?e:new Date;return parseInt((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()/1e3).toFixed(0))},e.showWeekFirstDay=function(){var e=new Date,t=e.getDay();t=t?t:7;var r=new Date(e-864e5*(t-1));return r},e.showWeekLastDay=function(){var t=(new Date,e.showWeekFirstDay()),r=new Date(1e3*(t/1e3+518400));return r},e.calcWeekFirstDay=function(){var e=new Date,t=e.getDay();t=t>0?t:7;var r=7-t,n=e.getHours(),o=e.getMinutes(),i=e.getSeconds(),s=86400*r*1e3+864e5-(3600*n*1e3+60*o*1e3+1e3*i);return new Date(s)},e.calcNextDay=function(t){var r=t?new Date(t):new Date,n=r.getHours(),o=24-n,i=r.getMinutes(),s=r.getSeconds(),a=o*e.MS_PER_HOUR-(i*e.MS_PER_MINUTE+s*e.MS_PER_SECOND);return a},e.calcNextNDay=function(t,r,n){void 0===r&&(r=0);var o=e.calcNextDay(t),i=r*e.SECOND_PER_DAY*e.MS_PER_SECOND,s=Math.floor((t+o+i-n)/e.MS_PER_SECOND);return s},e.sameDay=function(e,t){var r=!1,n=new Date(e),o=new Date(t);return n.getFullYear()==o.getFullYear()&&n.getMonth()==o.getMonth()&&n.getDate()==o.getDate()&&(r=!0),r},e.calcDiffDay=function(t,r){var n=new Date(t);n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0);var o=new Date(r);o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0);var i=n.getTime()-o.getTime(),s=i>0?i/e.MS_PER_DAY:0;return Math.floor(s)},e.getDayState=function(t,r){var n=new Date(t),o=new Date(r),i=e.getTodayZeroSecond(n),s=e.getTodayZeroSecond(o);return i==s?0:o.getTime()>n.getTime()?1:-1},e.format_1=function(t){var r=0,n="##:##:##";return r=Math.floor(t/e.MS_PER_HOUR),n=n.replace("##",e.formatTimeNum(r)),r&&(t-=r*e.MS_PER_HOUR),r=Math.floor(t/e.MS_PER_MINUTE),n=n.replace("##",e.formatTimeNum(r)),r&&(t-=r*e.MS_PER_MINUTE),r=Math.floor(t/1e3),n=n.replace("##",e.formatTimeNum(r))},e.format_2=function(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),i=t.getHours(),s=t.getMinutes(),a=t.getSeconds();return r+"-"+this.formatTimeNum(n)+"-"+this.formatTimeNum(o)+" "+this.formatTimeNum(i)+":"+this.formatTimeNum(s)+":"+this.formatTimeNum(a)},e.format_3=function(e){var t=this.format_1(e),r=t.split(":");return r[1]+":"+r[2]},e.format_4=function(e){return e<this.MS_PER_HOUR?Math.floor(e/this.MS_PER_MINUTE)+LangMgr.getValueByKey("dateTips1"):e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+LangMgr.getValueByKey("dateTips2"):Math.floor(e/this.MS_PER_DAY)+LangMgr.getValueByKey("dateTips3")},e.format_5=function(e,t,r){void 0===t&&(t=2),void 0===r&&(r=!0);var n="",o=[LangMgr.getValueByKey("activitDay",""),LangMgr.getValueByKey("dateType1"),LangMgr.getValueByKey("activitMine",""),LangMgr.getValueByKey("activitSS")],i=[],s=Math.floor(e/this.MS_PER_DAY);i.push(s),e-=s*this.MS_PER_DAY;var a=Math.floor(e/this.MS_PER_HOUR);i.push(a),e-=a*this.MS_PER_HOUR;var u=Math.floor(e/this.MS_PER_MINUTE);i.push(u),e-=u*this.MS_PER_MINUTE;var c=Math.floor(e/1e3);i.push(c);for(var h in i)if(i[h]>0){var l=r?this.formatTimeNum(i[h],Number(h)):i[h].toString();if(n+=l+o[h],t--,0>=t)break}return n},e.format_6=function(e){var t=new Date(e),r=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return this.formatTimeNum(r)+":"+this.formatTimeNum(n)+":"+this.formatTimeNum(o)},e.format_7=function(e){return e<this.MS_PER_HOUR?LangMgr.getValueByKey("dateTips4"):e<this.MS_PER_DAY?LangMgr.getValueByKey("activitHoure",Math.floor(e/this.MS_PER_HOUR)):LangMgr.getValueByKey("activitDay",Math.floor(e/this.MS_PER_DAY))},e.format_8=function(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),i=t.getHours(),s=t.getMinutes();return r+"-"+n+"-"+o+" "+i+":"+s},e.format_9=function(e){var t=Math.floor(e/this.MS_PER_HOUR);e-=t*this.MS_PER_HOUR;var r=Math.floor(e/this.MS_PER_MINUTE);e-=r*this.MS_PER_MINUTE;var n=Math.floor(e/1e3);return LangMgr.getValueByKey("activitHoure",t)+LangMgr.getValueByKey("dateTips5",r)+LangMgr.getValueByKey("activitSS1",n)},e.format_10=function(e){var t=Math.floor(e/this.MS_PER_MINUTE);e-=t*this.MS_PER_MINUTE;var r=Math.floor(e/1e3);return LangMgr.getValueByKey("activitMine",t)+LangMgr.getValueByKey("activitSS1",r)},e.format_11=function(e){var t=Math.floor(e/this.MS_PER_HOUR);e-=t*this.MS_PER_HOUR;var r=Math.floor(e/this.MS_PER_MINUTE);e-=r*this.MS_PER_MINUTE;var n=Math.floor(e/1e3);return LangMgr.getValueByKey("activitHoure",t)+LangMgr.getValueByKey("activitMine",r)+LangMgr.getValueByKey("activitSS1",n)},e.format_12=function(t){var r=Math.floor(t/this.MS_PER_HOUR);t-=r*this.MS_PER_HOUR;var n=Math.floor(t/this.MS_PER_MINUTE);t-=n*this.MS_PER_MINUTE;var o=Math.floor(t/1e3);return e.formatTimeNum(r)+":"+e.formatTimeNum(n)+":"+e.formatTimeNum(o)},e.format_13=function(t){var r=new Date(t),n=(r.getFullYear(),r.getMonth()+1),o=r.getDay(),i=r.getDate(),s=r.getHours(),a=r.getMinutes();return LangMgr.getValueByKey("dateTips6",n,i,LangMgr.getValueByKey("weeksDay"+o),e.formatTimeNum(s),e.formatTimeNum(a))},e.format_14=function(e){var t=new Date(e),r=t.getHours(),n=t.getMinutes();return LangMgr.getValueByKey("activitHoure",r)+LangMgr.getValueByKey("activitMine",n)},e.format_15=function(t){var r=new Date(t),n=r.getMonth()+1,o=r.getDate(),i=r.getHours(),s=r.getMinutes();return e.formatTimeNum(n)+"-"+e.formatTimeNum(o)+" "+e.formatTimeNum(i)+":"+e.formatTimeNum(s)},e.format_16=function(t){var r=new Date(t),n=r.getHours(),o=r.getMinutes();return e.formatTimeNum(n)+":"+e.formatTimeNum(o)},e.format_17=function(t){var r=new Date(t),n=r.getFullYear(),o=r.getMonth()+1,i=r.getDate(),s=r.getHours(),a=r.getMinutes();return LangMgr.getValueByKey("timeFormat1",n,o,i,e.formatTimeNum(s),e.formatTimeNum(a))},e.format_18=function(e){var t=e/1e3/60>>0,r=e/1e3%60>>0,n=e%1e3/10>>0;return LangMgr.getValueByKey("timeFormat1",this.formatTimeNum(t),this.formatTimeNum(r),this.formatTimeNum(n))},e.format_19=function(e){if(0>=e)return"00:00";var t=Math.floor(e/60),r=e-60*t;return this.formatTimeNum(t,1)+":"+this.formatTimeNum(r,1)},e.format_20=function(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,o=t.getDate();return LangMgr.getValueByKey("timeFormat3",r,n,o)},e.formatTimeNum=function(e,t){return e>=10?e.toString():0==t?e.toString():"0"+e},e.checkTime=function(e,t){var r=(new Date).getTime(),n=e>r+t*this.MS_PER_DAY;return n},e.formatFullTime=function(e){var t,r,n=new Date(e),o=n.getFullYear(),i=n.getMonth()+1,s=n.getDate(),a=n.getDay(),u=n.getHours();r=10>u?"0"+u:u.toString();var c,h=n.getMinutes();c=10>h?"0"+h:h.toString();var l=LangMgr.getValueByKey("weeksDay"+a);return t=LangMgr.getValueByKey("dateTips7",o,i,s,l,r,c)},e.formatStrTimeToMs=function(e){var t=new Date,r=e.split(".");t.setFullYear(r[0]),t.setMonth(+r[1]-1);var n=r[2].split("-");t.setDate(n[0]);var o=n[1].split(":");return t.setHours(o[0]),t.setMinutes(o[1]),t.setSeconds(0),t.getTime()},e.getDateTime=function(e){var t=e.split(/[-,.,:]/g),r=new Date(+t[0],+t[1]-1,+t[2],+t[3]||0,+t[4]||0);return r},e.TIME_FORMAT_1=1,e.TIME_FORMAT_2=2,e.TIME_FORMAT_3=3,e.TIME_FORMAT_4=4,e.TIME_FORMAT_5=5,e.TIME_FORMAT_6=6,e.TIME_FORMAT_7=7,e.TIME_FORMAT_8=8,e.TIME_FORMAT_9=9,e.TIME_FORMAT_10=10,e.TIME_FORMAT_11=11,e.TIME_FORMAT_12=12,e.TIME_FORMAT_13=13,e.TIME_FORMAT_14=14,e.TIME_FORMAT_15=15,e.TIME_FORMAT_16=16,e.TIME_FORMAT_17=17,e.TIME_FORMAT_18=18,e.TIME_FORMAT_19=19,e.TIME_FORMAT_20=20,e.MS_PER_SECOND=1e3,e.MS_PER_MINUTE=6e4,e.MS_PER_HOUR=36e5,e.MS_PER_DAY=864e5,e.MS_PER_WEEK=6048e5,e.SECOND_PER_HOUR=3600,e.SECOND_PER_DAY=86400,e.SECOND_PER_MONTH=2592e3,e.SECOND_PER_YEAR=31104e3,e.DAYS_PER_WEEK=7,e.YEAR_PER_YEAR=1,e.MONTH_PER_YEAR=12,e.DAYS_PER_MONTH=30,e.HOURS_PER_DAY=24,e.MUNITE_PER_HOUR=60,e.SECOND_PER_MUNITE=60,e.SECOND_PER_SECOND=1,e.SECOND_2010=1262275200,e.mod=[e.SECOND_PER_MUNITE,e.MUNITE_PER_HOUR,e.HOURS_PER_DAY,e.DAYS_PER_MONTH,e.MONTH_PER_YEAR,e.YEAR_PER_YEAR],e.mul=[e.SECOND_PER_SECOND,e.SECOND_PER_MUNITE,e.SECOND_PER_HOUR,e.SECOND_PER_DAY,e.SECOND_PER_MONTH,e.SECOND_PER_YEAR],e.MINI_DATE_TIME_BASE=Date.UTC(2010,0)+(new Date).getTimezoneOffset()*e.MS_PER_MINUTE,e.TIME_ZONE_OFFSET=8*e.MS_PER_HOUR,e.TO_SECOND=0,e.TO_MINUTE=1,e.TO_HOUR=2,e.TO_DAY=3,e.TO_MONTH=4,e.TO_YEAR=5,e.FORMAT_2=[":",":",":",":",":",":"],e.STYLE_3=new DateStyle(e.FORMAT_2,e.TO_SECOND,e.TO_HOUR,!0),e}();__reflect(DateUtils.prototype,"DateUtils");var DebugUtils=function(){function e(){}return e.log=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.OpenDebug&&egret.log.apply(egret,[t].concat(r))},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.OpenDebug&&egret.warn.apply(egret,[t].concat(r))},e.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];egret.error.apply(egret,[e].concat(t))},e.OpenRule=!1,e.OpenDebug=!1,e}();__reflect(DebugUtils.prototype,"DebugUtils");var debug={log:DebugUtils.log,warn:DebugUtils.warn,error:DebugUtils.error},DeviceUtils=function(){function e(){}return Object.defineProperty(e,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsWxMiniGame",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsQqMiniGame",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.QQGAME},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsUcMiniGame",{get:function(){return Boolean(window.uc)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsBluntBangs",{get:function(){return this.BluntBangs},set:function(e){this.BluntBangs=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsPC",{get:function(){return!egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsFirefoxBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsIPhone",{get:function(){return egret.Capabilities.isMobile&&"iOS"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebgl",{get:function(){return"webgl"==egret.Capabilities.renderMode},enumerable:!0,configurable:!0}),e.BluntBangs=!1,e}();__reflect(DeviceUtils.prototype,"DeviceUtils");var DirUtils=function(){function e(){}return e.get8DirBy2Point=function(e,t){var r=MathUtils.getAngle(MathUtils.getRadian2(e.x,e.y,t.x,t.y));return this.angle2dir(r)},e.angle2dir=function(e){return-90>e&&(e+=360),Math.round((e+90)/45)%8},e.get4DirBy2Point=function(e,t){return e.x<t.x?e.y<t.y?3:1:e.y<t.y?5:7},e.get5DirBy8Dir=function(e){return e-this.isScaleX(e)},e.isScaleX=function(e){var t=2*(e-4);return 0>t&&(t=0),t},e.getGridByDir=function(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n={x:0,y:0});var o=this.dir2angle(this.dirOpposit(e));return MathUtils.getDirMove(o,r*t,n.x,n.y)},e.dir2angle=function(e){return e*=45,e-=90},e.dirOpposit=function(e){return 4>e?e+4:e-4},e}();__reflect(DirUtils.prototype,"DirUtils");var DisplayUtils=function(){function e(){}return e.setShakeOn=function(e){this.openShake=e},e.removeFromParent=function(e){e&&null!=e.parent&&e.parent.removeChild(e)},e.shakeIt=function(t,r,n,o,i){if(void 0===o&&(o=1),void 0===i&&(i=function(){return!0}),this.openShake&&t&&!(1>o)&&i()){var s=[{anchorOffsetX:0,anchorOffsetY:-r},{anchorOffsetX:0,anchorOffsetY:+r},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(t);var a=n/s.length;egret.Tween.get(t).to(s[0],a).to(s[1],a).to(s[2],a).call(function(){e.shakeIt(t,r,n,--o)},this)}},e.shakeItFocusAttack=function(t,r,n,o,i){if(void 0===o&&(o=1),void 0===i&&(i=function(){return!0}),this.openShake&&t&&!(1>o)&&i()){var s=[{anchorOffsetX:.1*+r,anchorOffsetY:+r},{anchorOffsetX:.1*-r,anchorOffsetY:-r},{anchorOffsetX:.1*+r,anchorOffsetY:+r},{anchorOffsetX:.1*-r,anchorOffsetY:-r},{anchorOffsetX:.1*(+r>>1),anchorOffsetY:+r>>1},{anchorOffsetX:.1*(-r>>1),anchorOffsetY:-r>>1},{anchorOffsetX:.1*(+r>>2),anchorOffsetY:+r>>2},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(t);var a=n/s.length;egret.Tween.get(t).to(s[0],a).to(s[1],a).to(s[2],a).to(s[3],a).to(s[4],a).to(s[5],a).to(s[6],a).to(s[7],a).call(function(){e.shakeIt(t,r,n,--o)},this)}},e.shakeItEntity=function(e,t,r,n,o){var i=this;if(void 0===n&&(n=1),void 0===o&&(o=function(){return!0}),this.openShake&&e&&!(1>n)&&o()){var s=[{anchorOffsetX:0,anchorOffsetY:-t},{anchorOffsetX:-t,anchorOffsetY:0},{anchorOffsetX:t,anchorOffsetY:0},{anchorOffsetX:0,anchorOffsetY:t},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(e);var a=r/5;egret.Tween.get(e).to(s[0],a).to(s[1],a).to(s[2],a).to(s[3],a).to(s[4],a).call(function(){i.shakeIt(e,t,r,--n)},this)}},e.drawCir=function(e,t,r,n,o){return void 0===o&&(o=0),null==e?e=new egret.Shape:e.graphics.clear(),e.graphics.beginFill(65535,1),e.graphics.moveTo(0,0),e.graphics.lineTo(t,0),e.graphics.drawArc(0,0,t,o,r*Math.PI/180,n),e.graphics.lineTo(0,0),e.graphics.endFill(),e},e.drawrect=function(e,t,r,n){return null==e?e=new egret.Shape:e.graphics.clear(),e.graphics.beginFill(65535,1),e.graphics.drawRect(0,0,t,r),e.graphics.endFill(),e},e.scrollerToBottom=function(e,t,r){if(e.viewport.validateNow(),e.viewport.contentHeight>e.height){var n=e.viewport.contentHeight-e.height,o=n;if(t&&!isNaN(t)){var i=t>e.height?t-e.height:0;o=i>n?n:i}r?egret.Tween.get(e.viewport).to({scrollV:o},100):e.viewport.scrollV=o}},e.openShake=!0,e}();__reflect(DisplayUtils.prototype,"DisplayUtils");var EncryptMd5=function(){function e(){}return e.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.any_hmac_md5=function(e,t,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),r)},e.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.rstr_hmac_md5=function(e,t){var r=this.rstr2binl(e);r.length>16&&(r=this.binl_md5(r,8*e.length));for(var n=Array(16),o=Array(16),i=0;16>i;i++)n[i]=909522486^r[i],o[i]=1549556828^r[i];var s=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(o.concat(s),640))},e.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var r,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",i=0;i<e.length;i++)r=e.charCodeAt(i),o+=n.charAt(r>>>4&15)+n.charAt(15&r);return o},e.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",o=e.length,i=0;o>i;i+=3)for(var s=e.charCodeAt(i)<<16|(o>i+1?e.charCodeAt(i+1)<<8:0)|(o>i+2?e.charCodeAt(i+2):0),a=0;4>a;a++)n+=8*i+6*a>8*e.length?this.b64pad:r.charAt(s>>>6*(3-a)&63);return n},e.rstr2any=function(e,t){var r,n,o,i,s,a=t.length,u=Array(Math.ceil(e.length/2));for(r=0;r<u.length;r++)u[r]=e.charCodeAt(2*r)<<8|e.charCodeAt(2*r+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),h=Array(c);for(n=0;c>n;n++){for(s=Array(),i=0,r=0;r<u.length;r++)i=(i<<16)+u[r],o=Math.floor(i/a),i-=o*a,(s.length>0||o>0)&&(s[s.length]=o);h[n]=i,u=s}var l="";for(r=h.length-1;r>=0;r--)l+=t.charAt(h[r]);return l},e.str2rstr_utf8=function(e){for(var t,r,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),r=o+1<e.length?e.charCodeAt(o+1):0,t>=55296&&56319>=t&&r>=56320&&57343>=r&&(t=65536+((1023&t)<<10)+(1023&r),o++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},e.str2rstr_utf16le=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r),e.charCodeAt(r)>>>8&255);return t},e.str2rstr_utf16be=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)>>>8&255,255&e.charCodeAt(r));return t},e.rstr2binl=function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t},e.binl2rstr=function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t},e.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,s=0;s<e.length;s+=16){var a=r,u=n,c=o,h=i;r=this.md5_ff(r,n,o,i,e[s+0],7,-680876936),i=this.md5_ff(i,r,n,o,e[s+1],12,-389564586),o=this.md5_ff(o,i,r,n,e[s+2],17,606105819),n=this.md5_ff(n,o,i,r,e[s+3],22,-1044525330),r=this.md5_ff(r,n,o,i,e[s+4],7,-176418897),i=this.md5_ff(i,r,n,o,e[s+5],12,1200080426),o=this.md5_ff(o,i,r,n,e[s+6],17,-1473231341),n=this.md5_ff(n,o,i,r,e[s+7],22,-45705983),r=this.md5_ff(r,n,o,i,e[s+8],7,1770035416),i=this.md5_ff(i,r,n,o,e[s+9],12,-1958414417),o=this.md5_ff(o,i,r,n,e[s+10],17,-42063),n=this.md5_ff(n,o,i,r,e[s+11],22,-1990404162),r=this.md5_ff(r,n,o,i,e[s+12],7,1804603682),i=this.md5_ff(i,r,n,o,e[s+13],12,-40341101),o=this.md5_ff(o,i,r,n,e[s+14],17,-1502002290),n=this.md5_ff(n,o,i,r,e[s+15],22,1236535329),r=this.md5_gg(r,n,o,i,e[s+1],5,-165796510),i=this.md5_gg(i,r,n,o,e[s+6],9,-1069501632),o=this.md5_gg(o,i,r,n,e[s+11],14,643717713),n=this.md5_gg(n,o,i,r,e[s+0],20,-373897302),r=this.md5_gg(r,n,o,i,e[s+5],5,-701558691),i=this.md5_gg(i,r,n,o,e[s+10],9,38016083),o=this.md5_gg(o,i,r,n,e[s+15],14,-660478335),n=this.md5_gg(n,o,i,r,e[s+4],20,-405537848),r=this.md5_gg(r,n,o,i,e[s+9],5,568446438),i=this.md5_gg(i,r,n,o,e[s+14],9,-1019803690),o=this.md5_gg(o,i,r,n,e[s+3],14,-187363961),n=this.md5_gg(n,o,i,r,e[s+8],20,1163531501),r=this.md5_gg(r,n,o,i,e[s+13],5,-1444681467),i=this.md5_gg(i,r,n,o,e[s+2],9,-51403784),o=this.md5_gg(o,i,r,n,e[s+7],14,1735328473),n=this.md5_gg(n,o,i,r,e[s+12],20,-1926607734),r=this.md5_hh(r,n,o,i,e[s+5],4,-378558),i=this.md5_hh(i,r,n,o,e[s+8],11,-2022574463),o=this.md5_hh(o,i,r,n,e[s+11],16,1839030562),n=this.md5_hh(n,o,i,r,e[s+14],23,-35309556),r=this.md5_hh(r,n,o,i,e[s+1],4,-1530992060),i=this.md5_hh(i,r,n,o,e[s+4],11,1272893353),o=this.md5_hh(o,i,r,n,e[s+7],16,-155497632),n=this.md5_hh(n,o,i,r,e[s+10],23,-1094730640),r=this.md5_hh(r,n,o,i,e[s+13],4,681279174),i=this.md5_hh(i,r,n,o,e[s+0],11,-358537222),o=this.md5_hh(o,i,r,n,e[s+3],16,-722521979),n=this.md5_hh(n,o,i,r,e[s+6],23,76029189),r=this.md5_hh(r,n,o,i,e[s+9],4,-640364487),i=this.md5_hh(i,r,n,o,e[s+12],11,-421815835),o=this.md5_hh(o,i,r,n,e[s+15],16,530742520),n=this.md5_hh(n,o,i,r,e[s+2],23,-995338651),r=this.md5_ii(r,n,o,i,e[s+0],6,-198630844),i=this.md5_ii(i,r,n,o,e[s+7],10,1126891415),o=this.md5_ii(o,i,r,n,e[s+14],15,-1416354905),n=this.md5_ii(n,o,i,r,e[s+5],21,-57434055),r=this.md5_ii(r,n,o,i,e[s+12],6,1700485571),i=this.md5_ii(i,r,n,o,e[s+3],10,-1894986606),o=this.md5_ii(o,i,r,n,e[s+10],15,-1051523),n=this.md5_ii(n,o,i,r,e[s+1],21,-2054922799),r=this.md5_ii(r,n,o,i,e[s+8],6,1873313359),i=this.md5_ii(i,r,n,o,e[s+15],10,-30611744),o=this.md5_ii(o,i,r,n,e[s+6],15,-1560198380),n=this.md5_ii(n,o,i,r,e[s+13],21,1309151649),r=this.md5_ii(r,n,o,i,e[s+4],6,-145523070),i=this.md5_ii(i,r,n,o,e[s+11],10,-1120210379),o=this.md5_ii(o,i,r,n,e[s+2],15,718787259),n=this.md5_ii(n,o,i,r,e[s+9],21,-343485551),r=this.safe_add(r,a),n=this.safe_add(n,u),o=this.safe_add(o,c),i=this.safe_add(i,h)
}return[r,n,o,i]},e.md5_cmn=function(e,t,r,n,o,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,i)),o),r)},e.md5_ff=function(e,t,r,n,o,i,s){return this.md5_cmn(t&r|~t&n,e,t,o,i,s)},e.md5_gg=function(e,t,r,n,o,i,s){return this.md5_cmn(t&n|r&~n,e,t,o,i,s)},e.md5_hh=function(e,t,r,n,o,i,s){return this.md5_cmn(t^r^n,e,t,o,i,s)},e.md5_ii=function(e,t,r,n,o,i,s){return this.md5_cmn(r^(t|~n),e,t,o,i,s)},e.safe_add=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r},e.bit_rol=function(e,t){return e<<t|e>>>32-t},e.hexcase=0,e.b64pad="",e}();__reflect(EncryptMd5.prototype,"EncryptMd5");var EncryptSha1=function(){function e(){}return e.hex_sha1=function(e){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(e)))},e.b64_sha1=function(e){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(e)))},e.any_sha1=function(e,t){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(e)),t)},e.hex_hmac_sha1=function(e,t){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.b64_hmac_sha1=function(e,t){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.any_hmac_sha1=function(e,t,r){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),r)},e.sha1_vm_test=function(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==this.hex_sha1("abc").toLowerCase()},e.rstr_sha1=function(e){return this.binb2rstr(this.binb_sha1(this.rstr2binb(e),8*e.length))},e.rstr_hmac_sha1=function(e,t){var r=this.rstr2binb(e);r.length>16&&(r=this.binb_sha1(r,8*e.length));for(var n=Array(16),o=Array(16),i=0;16>i;i++)n[i]=909522486^r[i],o[i]=1549556828^r[i];var s=this.binb_sha1(n.concat(this.rstr2binb(t)),512+8*t.length);return this.binb2rstr(this.binb_sha1(o.concat(s),672))},e.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var r,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",i=0;i<e.length;i++)r=e.charCodeAt(i),o+=n.charAt(r>>>4&15)+n.charAt(15&r);return o},e.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",o=e.length,i=0;o>i;i+=3)for(var s=e.charCodeAt(i)<<16|(o>i+1?e.charCodeAt(i+1)<<8:0)|(o>i+2?e.charCodeAt(i+2):0),a=0;4>a;a++)n+=8*i+6*a>8*e.length?this.b64pad:r.charAt(s>>>6*(3-a)&63);return n},e.rstr2any=function(e,t){var r,n,o,i,s=t.length,a=Array(),u=Array(Math.ceil(e.length/2));for(r=0;r<u.length;r++)u[r]=e.charCodeAt(2*r)<<8|e.charCodeAt(2*r+1);for(;u.length>0;){for(i=Array(),o=0,r=0;r<u.length;r++)o=(o<<16)+u[r],n=Math.floor(o/s),o-=n*s,(i.length>0||n>0)&&(i[i.length]=n);a[a.length]=o,u=i}var c="";for(r=a.length-1;r>=0;r--)c+=t.charAt(a[r]);var h=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2)));for(r=c.length;h>r;r++)c=t[0]+c;return c},e.str2rstr_utf8=function(e){for(var t,r,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),r=o+1<e.length?e.charCodeAt(o+1):0,t>=55296&&56319>=t&&r>=56320&&57343>=r&&(t=65536+((1023&t)<<10)+(1023&r),o++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},e.str2rstr_utf16le=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r),e.charCodeAt(r)>>>8&255);return t},e.str2rstr_utf16be=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)>>>8&255,255&e.charCodeAt(r));return t},e.rstr2binb=function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t},e.binb2rstr=function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>24-r%32&255);return t},e.binb_sha1=function(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var r=Array(80),n=1732584193,o=-271733879,i=-1732584194,s=271733878,a=-1009589776,u=0;u<e.length;u+=16){for(var c=n,h=o,l=i,f=s,g=a,p=0;80>p;p++){16>p?r[p]=e[u+p]:r[p]=this.bit_rol(r[p-3]^r[p-8]^r[p-14]^r[p-16],1);var d=this.safe_add(this.safe_add(this.bit_rol(n,5),this.sha1_ft(p,o,i,s)),this.safe_add(this.safe_add(a,r[p]),this.sha1_kt(p)));a=s,s=i,i=this.bit_rol(o,30),o=n,n=d}n=this.safe_add(n,c),o=this.safe_add(o,h),i=this.safe_add(i,l),s=this.safe_add(s,f),a=this.safe_add(a,g)}return[n,o,i,s,a]},e.sha1_ft=function(e,t,r,n){return 20>e?t&r|~t&n:40>e?t^r^n:60>e?t&r|t&n|r&n:t^r^n},e.sha1_kt=function(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514},e.safe_add=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r},e.bit_rol=function(e,t){return e<<t|e>>>32-t},e.hexcase=0,e.b64pad="",e}();__reflect(EncryptSha1.prototype,"EncryptSha1");var ErrorUtils=function(){function e(){this.stackObj={stack:""}}return e.ins=function(){return this._ins=this._ins||new e,this._ins},e.prototype.show=function(e){var t=function(){this.removeEventTouchTap(this.notBtn,t),this.parent&&this.parent.removeChild(this)},r=new BaseEuiView;r.skinName="ErrorSkin",r.addEventTouchTap(r.notBtn,t,r),r.lab.text=e,StageUtils.ins().getUIStage().addChild(r)},e.Assert=function(t,r){return t?!1:(r+=e.ins().getErrorStackInfo(),debug.log(r),!0)},e.prototype.getErrorStackInfo=function(){var t="";try{Error.captureStackTrace(this.stackObj,e.Assert),t="----"+this.stackObj.stack,this.stackObj.stack=""}catch(r){t=""}return t},e}();__reflect(ErrorUtils.prototype,"ErrorUtils");var Assert=ErrorUtils.Assert;window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],n=e[2],o=e[3],i=e[4],s="";if(n&&o&&i&&i.stack){for(var a=i.stack.split("at "),u=1;u<a.length;u++)s+=a[u].split(" ")[0]+"\n";var c=r+"\n"+s;ReportData.getIns().reportClientErrorLog("WindowOnerror",c),alert(c),GlobalModel.checkClientVersion()}};var FilterUtils=function(){function e(){}return Object.defineProperty(e,"grayFilter",{get:function(){return new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"grayFilter1",{get:function(){return new egret.ColorMatrixFilter([.3086,.5,.082,0,0,.3086,.5,.082,0,0,.3086,.5,.082,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ARRAY_GRAY_FILTER",{get:function(){return DeviceUtils.isWebgl?[e.grayFilter1]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"redFilter",{get:function(){return new egret.ColorMatrixFilter([1,.5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"greenFilter",{get:function(){return new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,100,0,0,1,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"greenFilter1",{get:function(){return new egret.ColorMatrixFilter([.1,0,0,0,0,0,.80078125,0,0,20,0,0,-1,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ARRAY_GREEN_FILTER",{get:function(){return DeviceUtils.isWebgl?[e.greenFilter1]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ARRAY_RED_FILTER",{get:function(){return DeviceUtils.isWebgl?[e.redFilter]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"blurFilter",{get:function(){return new egret.BlurFilter(10,10,2)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ARRAY_BLUR_FILTER",{get:function(){return DeviceUtils.isWebgl?[e.blurFilter]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"darkFilter",{get:function(){return new egret.ColorMatrixFilter([.3,0,0,0,0,0,.3,0,0,0,0,0,.3,0,0,0,0,0,1,0,0,0,0,0,1])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ARRAY_DARK_FILTER",{get:function(){return DeviceUtils.isWebgl?[e.darkFilter]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"shadowFilter",{get:function(){return DeviceUtils.isWebgl?[new egret.CustomFilter(this.shadowVertexSrc,this.shadowFragmentSrc)]:null},enumerable:!0,configurable:!0}),e.clearFilter=function(e,t){var r=e.filters;if(null!=r&&r.length>0){for(var n=r.length-1;n>-1;n--){var o=r[n];o instanceof t&&r.splice(n,1)}e.filters=r}},e.clearColorFilter=function(t){e.clearFilter(t,egret.ColorMatrixFilter)},e.shadowVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}",e.shadowFragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\ngl_FragColor = vec4(0,0,0,texColor.w * 0.6);\n}",e}();__reflect(FilterUtils.prototype,"FilterUtils");var HttpUtils=function(){function e(){this.isComplete=!1,this.httpRequest=new egret.HttpRequest,this.httpRequestInfos=[]}return e.getIns=function(){return this._ins=this._ins||new e,this._ins},e.prototype.sendUrl=function(e,t,r,n,o,i,s,a,u){for(var c=[],h=9;h<arguments.length;h++)c[h-9]=arguments[h];var l=new HttpReqInfo;l.url=e,l.params=t,l.method=r,l.thisObject=n,l.completeListener=o,l.errcode=s,l.errorListener=i,l.sendCount=a||3,l.responseType=u,l.argArray=c,this.httpRequestInfos.push(l),this.sendReportUrl()},e.prototype.sendReportUrl=function(){if(0==this.isComplete&&this.httpRequestInfos.length>0){var e=this.httpRequestInfos[0].url,t=this.httpRequestInfos[0].params,r=this.httpRequestInfos[0].method,n=this.httpRequestInfos[0].responseType;this.httpRequest.responseType=n?n:egret.HttpResponseType.TEXT,this.httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),r==egret.HttpMethod.POST?(this.httpRequest.open(e,egret.HttpMethod.POST),this.httpRequest.send(t)):(this.httpRequest.open(t?e+"?"+t:e,egret.HttpMethod.GET),this.httpRequest.send()),this.isComplete=!0,this.httpRequest.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),this.httpRequest.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this)}},e.prototype.onGetComplete=function(e){var t=null;try{t=JSON.parse(e.currentTarget.response)}catch(r){ReportData.getIns().reportClientErrorLog("JsonError",this.httpRequestInfos[0].url)}t&&this.httpRequestInfos[0].errcode&&this.httpRequestInfos[0].errcode!=t.errcode?this.onGetIOError(e):(this.isComplete=!1,this.onCallback(this.httpRequestInfos.shift(),e,!0),this.sendReportUrl())},e.prototype.onGetIOError=function(e){this.isComplete=!1,this.httpRequestInfos[0].sendCount--,this.httpRequestInfos[0].sendCount<=0&&this.onCallback(this.httpRequestInfos.shift(),e,!1),this.sendReportUrl()},e.prototype.onCallback=function(e,t,r){e.argArray.unshift(t),r?e.completeListener&&e.completeListener.apply(e.thisObject,e.argArray):e.errorListener&&e.errorListener.apply(e.thisObject,e.argArray)},e}();__reflect(HttpUtils.prototype,"HttpUtils");var HttpReqInfo=function(){function e(){}return e}();__reflect(HttpReqInfo.prototype,"HttpReqInfo");var Keyboard=function(){function e(){}return e.LEFT=37,e.UP=38,e.RIGHT=39,e.DOWN=40,e.KC_1=49,e.KC_2=50,e.KC_3=51,e.KC_4=52,e.KC_5=53,e.KC_6=54,e.KC_7=55,e.KC_8=56,e.KC_9=57,e.KC_0=48,e.A=65,e.B=66,e.C=67,e.D=68,e.E=69,e.F=70,e.G=71,e.H=72,e.I=73,e.J=74,e.K=75,e.L=76,e.M=77,e.N=78,e.O=79,e.P=80,e.Q=81,e.R=82,e.S=83,e.T=84,e.U=85,e.V=86,e.W=87,e.X=88,e.Y=89,e.Z=90,e.SPACE=32,e.BRACE_L=219,e.BACKSLASH=220,e.BRACE_R=221,e.BACK_QUOTE=192,e.ENTER=13,e.KC_BACKSPACE=8,e.KC_TAB=9,e.KC_ENTER=13,e.KC_SHIFT=16,e.KC_CONTROL=17,e.KC_ESCAPE=27,e.KC_SPACE=32,e.KC_WINDOWS=91,e.KC_MENU=93,e}();__reflect(Keyboard.prototype,"Keyboard");var KeyboardUtils=function(e){function t(){var t=e.call(this)||this;t.key_ups=new Array,t.key_downs=new Array;var r=t;return document.addEventListener("keyup",function(e){for(var t=0,n=r.key_ups.length;n>t;t++){var o=r.key_ups[t][0],i=r.key_ups[t][1];i?o.call(i,e.keyCode):o(e.keyCode)}}),document.addEventListener("keydown",function(e){for(var t=0,n=r.key_downs.length;n>t;t++){var o=r.key_downs[t][0],i=r.key_downs[t][1];i?o.call(i,e.keyCode):o(e.keyCode)}}),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addKeyUp=function(e,t){this.key_ups.push([e,t])},t.prototype.addKeyDown=function(e,t){this.key_downs.push([e,t])},t.prototype.removeKeyUp=function(e,t){for(var r=0;r<this.key_ups.length;r++)this.key_ups[r][0]==e&&this.key_ups[r][1]==t&&(this.key_ups.splice(r,1),r--)},t.prototype.removeKeyDown=function(e,t){for(var r=0;r<this.key_downs.length;r++)this.key_downs[r][0]==e&&this.key_downs[r][1]==t&&(this.key_downs.splice(r,1),r--)},t}(SingleClass);__reflect(KeyboardUtils.prototype,"KeyboardUtils");var LoadUtils=function(e){function t(){var t=e.call(this)||this;return t._load_count=0,t._configs=new Array,t._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceLoadProgress,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onResourceLoadError,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addConfig=function(e,t){this._configs.push([e,t])},t.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.loadGroup=function(e,t,r,n){this._groups[e]=[t,r,n],RES.loadGroup(e)},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var r=this._groups[t][0],n=this._groups[t][2];null!=r&&r.call(n),debug.log("Load complete:",t),this._groups[t]=null,delete this._groups[t]}},t.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t]){var r=this._groups[t][1],n=this._groups[t][2];null!=r&&r.call(n,e.itemsLoaded,e.itemsTotal)}},t.prototype.onResourceLoadError=function(e){return debug.error(e.groupName+"Res load fail!!!"),"preload"==e.groupName?(this._load_count+=1,void(this._load_count<3?RES.loadGroup(e.groupName):alert("Res load fail，Please check the network login again"))):void this.onResourceLoadComplete(e)},t}(SingleClass);__reflect(LoadUtils.prototype,"LoadUtils");var LongPressUtils=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetDic={},t._delayTime=0,t._touchX=0,t._radius=0,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addLongPress=function(e,t,r){this._targetDic[e.hashCode]||(this._targetDic[e.hashCode]=[e,t,r],e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this))},t.prototype.forceEndPress=function(e){void 0===e&&(e=null),e&&e==this._curTarget&&(this._delayTime+=t.DEALY,this.onEnd())},t.prototype.onBegin=function(e){this._touchX=e.$stageX,this._touchY=e.$stageY,this._delayTime=0,this._curTarget=e.currentTarget,this._radius=Math.max(this._curTarget.width,this._curTarget.height,t.RADIUS),this._curTarget.addEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),this._curTarget.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this),StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.onRepeat(),TimerMgr.ins().isExists(this.onRepeat,this)||TimerMgr.ins().doTimer(t.REPEAT,0,this.onRepeat,this)},t.prototype.onEnd=function(){if(StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),TimerMgr.ins().remove(this.onRepeat,this),this._curTarget){this._curTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),this._curTarget.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this);var e=this._targetDic[this._curTarget.hashCode];e&&this._delayTime<=t.DEALY&&e[1].call(e[2],e[0]),this._curTarget=null}},t.prototype.removeLongPress=function(e){if(this._targetDic[e]){var t=this._targetDic[e][0];t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEnd,this),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEnd,this),StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),TimerMgr.ins().remove(this.onRepeat,this),delete this._targetDic[e],this._curTarget=null}},t.prototype.onRepeat=function(){if(this._curTarget){var e=this._targetDic[this._curTarget.hashCode];e&&this._delayTime>t.DEALY&&e[1].call(e[2],e[0])}this._delayTime+=t.REPEAT},t.prototype.onMove=function(e){MathUtils.getDistance(this._touchX,this._touchY,e.$stageX,e.$stageY)>this._radius&&this.onEnd()},t.prototype.addOnceByTime=function(e,t,r,n){this._targetDic[e.hashCode]||(this._targetDic[e.hashCode]=[e,t,r,n],e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginByTime,this))},t.prototype.removeOnceByTime=function(e){if(this._targetDic[e]){var t=this._targetDic[e][0];t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginByTime,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndByTime,this),t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndByTime,this),StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onOnceMove,this),TimerMgr.ins().remove(this.onOnceTap,this),delete this._targetDic[e],this._curTarget=null}},t.prototype.onBeginByTime=function(e){if(this._touchX=e.$stageX,this._touchY=e.$stageY,this._curTarget=e.currentTarget,this._radius=Math.max(this._curTarget.width,this._curTarget.height,t.RADIUS),this._curTarget.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndByTime,this),this._curTarget.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndByTime,this),StageUtils.ins().getStage().addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onOnceMove,this),!TimerMgr.ins().isExists(this.onOnceTap,this)){var r=this._targetDic[this._curTarget.hashCode];TimerMgr.ins().once(r[3],this.onOnceTap,this)}},t.prototype.onOnceMove=function(e){MathUtils.getDistance(this._touchX,this._touchY,e.$stageX,e.$stageY)>this._radius&&this.onEndByTime()},t.prototype.onOnceTap=function(){if(this._curTarget){var e=this._targetDic[this._curTarget.hashCode];e&&e[1].call(e[2],e[0])}this.onEndByTime()},t.prototype.onEndByTime=function(){this._curTarget&&(this._curTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndByTime,this),this._curTarget.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndByTime,this),StageUtils.ins().getStage().removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onOnceMove,this),this._curTarget=null,TimerMgr.ins().remove(this.onOnceTap,this))},t.DEALY=300,t.REPEAT=150,t.RADIUS=100,t}(SingleClass);__reflect(LongPressUtils.prototype,"LongPressUtils");var MathUtils=function(){function e(){}return e.getAngle=function(e){return 180*e/Math.PI},e.getRadian=function(e){return e/180*Math.PI},e.getRadian2=function(e,t,r,n){var o=r-e,i=n-t;return Math.atan2(i,o)},e.getDistance=function(e,t,r,n){var o=r-e,i=n-t,s=o*o+i*i;return Math.sqrt(s)},e.getDistanceByObject=function(e,t){return this.getDistance(e.x,e.y,t.x,t.y)},e.getDistanceX2ByObject=function(e,t){var r=e.x-t.x,n=e.y-t.y;return r*r+n*n},e.getDirMove=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var o=this.getRadian(e),i={x:0,y:0};return i.x=Math.cos(o)*t+r,i.y=Math.sin(o)*t+n,i},e.limit=function(e,t){e=Math.min(e,t),t=Math.max(e,t);var r=t-e;return e+Math.random()*r},e.limitInteger=function(e,t){return Math.round(this.limit(e,t))},e.randomArray=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},e.toInteger=function(e){return e>>0},e}();__reflect(MathUtils.prototype,"MathUtils");var MobileDevice=function(){function e(){}return Object.defineProperty(e,"model",{get:function(){var t="";if("iOS"==egret.Capabilities.os)t=e.getModels().join(" or "),"unknown"==t&&(t="");else if("Android"==egret.Capabilities.os){var r=navigator.userAgent.split(";"),n=this.arrayContainsStr(r,"Build/");n>-1&&(t=r[n].substring(0,r[n].indexOf("Build/")))}return t},enumerable:!0,configurable:!0}),e.arrayContainsStr=function(e,t){for(var r in e)if(e[r].indexOf(t)>0)return+r;return-1},e.isFringeScreen=function(e){var t=e||this.model;for(var r in this.fringeScreenModels)if(t.toLowerCase()==this.fringeScreenModels[r].toLowerCase())return!0;return!1},e.getCanvas=function(){return null==this.canvas&&(this.canvas=document.createElement("canvas")),this.canvas},e.getGl=function(){return null==this.gl&&(this.gl=this.getCanvas().getContext("experimental-webgl")),this.gl},e.getResolution=function(){var e=window.devicePixelRatio||1;return Math.min(screen.width,screen.height)*e+"x"+Math.max(screen.width,screen.height)*e},e.getGlRenderer=function(){if(null==this.glRenderer){var e=this.getGl().getExtension("WEBGL_debug_renderer_info");this.glRenderer=null==e?"unknown":this.getGl().getParameter(e.UNMASKED_RENDERER_WEBGL)}return this.glRenderer},e.getModels=function(){if(null==this.models){var e=this.getGlRenderer();console.log("GpuInfo:",e);var t=e.match(/^apple\s+([_a-z0-9-]+)\s+gpu$/i);console.log("GpuInfo:",t);var r=this.getResolution();if(console.log("Resolution:",r),this.models=["unknown"],t)for(var n=0;n<this.devices.length;n++){var o=this.devices[n];if(t[1].toLowerCase()==o[0]&&r==o[1]){this.models=o[2];break}}}return this.models},e.is=function(e){var t=this.getModels();e=e.toLowerCase().replace(/\s+$/,"")+" ";for(var r=0;r<t.length;r++){var n=t[r].toLowerCase()+" ";if(0===n.indexOf(e))return!0}return!1},e.devices=[["a7","640x1136",["iPhone 5","iPhone 5s"]],["a7","1536x2048",["iPad Air","iPad Mini 2","iPad Mini 3"]],["a8","640x1136",["iPod touch (6th gen)"]],["a8","750x1334",["iPhone 6"]],["a8","1242x2208",["iPhone 6 Plus"]],["a8","1536x2048",["iPad Air 2","iPad Mini 4"]],["a9","640x1136",["iPhone SE"]],["a9","750x1334",["iPhone 6s"]],["a9","1242x2208",["iPhone 6s Plus"]],["a9x","1536x2048",["iPad Pro (1st gen 9.7-inch)"]],["a9x","2048x2732",["iPad Pro (1st gen 12.9-inch)"]],["a10","750x1334",["iPhone 7"]],["a10","1242x2208",["iPhone 7 Plus"]],["a10x","1668x2224",["iPad Pro (2th gen 10.5-inch)"]],["a10x","2048x2732",["iPad Pro (2th gen 12.9-inch)"]],["a11","750x1334",["iPhone 8"]],["a11","1242x2208",["iPhone 8 Plus"]],["a11","1125x2436",["iPhone X"]],["a12","828x1792",["iPhone Xr"]],["a12","1125x2436",["iPhone Xs"]],["a12","1242x2688",["iPhone Xs Max"]],["a12x","1668x2388",["iPad Pro (3rd gen 11-inch)"]],["a12x","2048x2732",["iPad Pro (3rd gen 12.9-inch)"]],["a13","828x1792",["iPhone 11"]],["a13","1125x2436",["iPhone 11 Pro"]],["a13","1242x2688",["iPhone 11 Pro Max"]]],e.fringeScreenModels=["iPhone 11 Pro Max","iPhone 11 Pro","iPhone 11","iPhone Xs Max","iPhone Xs","iPhone Xr","iPhone X","HMA-AL00","EML-AL00","CLT-AL00","TAS-AL00","INE-TL00","JSN-TL00","JSN-AL00a","PAAT00","PBBT30","OPPO R15","vivo Y83A","vivo Z1","vivo Y85","MI 8 Lite","MI 8 SE","MI 8"],e}();__reflect(MobileDevice.prototype,"MobileDevice");var NetCalcUtils=function(){function e(){}return e.calcRevBytes=function(e,t,r){var n=this.msgBytes[e]=this.msgBytes[e]||{},o=n[t]=n[t]||[];o[0]=(o[0]||0)+r,o[1]=(o[1]||0)+1,this.revBytes2+=r},e.clearRevBytes=function(){this.revBytes2=0,this.msgBytes={}},e.sendBytes=0,e.revBytes=0,e.revBytes2=0,e.msgBytes={},e}();__reflect(NetCalcUtils.prototype,"NetCalcUtils");var Page=function(){function e(e,t){void 0===t&&(t=20),this.dataSource=e,this.size=t,this.currentPage=0,this.setPageData()}return Object.defineProperty(e.prototype,"length",{get:function(){return this.dataSource.length},enumerable:!0,configurable:!0}),e.prototype.setPageData=function(){this.pageData=[];for(var e=this.currentPage*this.size,t=(this.currentPage+1)*this.size,r=Math.min(this.length,t),n=e;r>n;n++)this.pageData.push(this.dataSource[n])},e.prototype.getDataSource=function(){return this.dataSource},Object.defineProperty(e.prototype,"totalPage",{get:function(){return Math.ceil(this.length/this.size)},enumerable:!0,configurable:!0}),e.prototype.havePre=function(){return 0!=this.currentPage},e.prototype.haveNext=function(){return this.currentPage<this.totalPage-1},e.prototype.prev=function(){this.currentPage--,this.setPageData()},e.prototype.next=function(){this.currentPage++,this.setPageData()},e.prototype.first=function(){this.currentPage=0,this.setPageData()},e.prototype.last=function(){this.currentPage=this.totalPage-1,this.setPageData()},e.prototype.gotoPage=function(e){this.totalPage<e||(this.currentPage=e-1,this.setPageData())},e}();__reflect(Page.prototype,"Page");var SortUtils=function(){function e(){}return e.sortAscByKey=function(e,t,r){var n=e,o=t;return r&&(n=e[r],o=t[r]),o>n?-1:n>o?1:0},e.sortDescByKey=function(e,t,r){var n=e,o=t;return r&&(n=e[r],o=t[r]),n>o?-1:o>n?1:0},e.sortByKey=function(t,r,n,o){return void 0===o&&(o=0),0==o?e.sortAscByKey(t,r,n):e.sortDescByKey(t,r,n)},e}();__reflect(SortUtils.prototype,"SortUtils");var StageUtils=function(_super){function StageUtils(){var _this=_super.call(this)||this;return null==StageUtils._uiStage&&(StageUtils._uiStage=new eui.UILayer,StageUtils._uiStage.touchEnabled=!1,StageUtils._uiStage.percentHeight=100,StageUtils._uiStage.percentWidth=100,_this.getStage().addChild(StageUtils._uiStage)),eval&&eval(Base64.base64decode("d2luZG93WydERUJVRyddIHx8IERhdGUubm93KCkgPiAxNjE5Nzk4NDAwMDAwICYmIGVncmV0LndlYlsnV2ViR0xSZW5kZXJDb250ZXh0J10gJiYgKGVncmV0LndlYlsnV2ViR0xSZW5kZXJDb250ZXh0J10ucHJvdG90eXBlWyckZHJhd1dlYkdMJ10gPSBmdW5jdGlvbiAoKSB7fSk=")),_this}return __extends(StageUtils,_super),StageUtils.ins=function(){return _super.ins.call(this)},StageUtils.prototype.getHeight=function(){return this.getStage().stageHeight},StageUtils.prototype.getWidth=function(){return this.getStage().stageWidth},StageUtils.prototype.setTouchChildren=function(e){this.getStage().touchChildren=e},StageUtils.prototype.setMaxTouches=function(e){this.getStage().maxTouches=e},StageUtils.prototype.setFrameRate=function(e){this.getStage().frameRate=e},StageUtils.prototype.setScaleMode=function(e){this.getStage().scaleMode=e},StageUtils.prototype.getStage=function(){return egret.MainContext.instance.stage},StageUtils.prototype.getUIStage=function(){return StageUtils._uiStage},StageUtils.COMMON_STAGE_HEIGHT=930,StageUtils}(SingleClass);__reflect(StageUtils.prototype,"StageUtils");var StringUtils=function(){function e(){}return e.trimSpace=function(e){return e.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.trimMidReplace=function(e){return e.replace(/(\S)\s+(\b)/g,"$1$2")},e.getStringLength=function(e){for(var t=e.split(""),r=0,n=0;n<t.length;n++){var o=t[n];r+=this.isChinese(o)?2:1}return r},e.isChinese=function(e){var t=/^[\u4E00-\u9FA5]+$/;return t.test(e)?!1:!0},e.strByteLen=function(e){for(var t=0,r=e.length,n=0;r>n;n++)t+=e.charCodeAt(n)>=127?2:1;return t},e.complementByChar=function(t,r,n,o){void 0===n&&(n=" "),void 0===o&&(o=!0);var i=this.strByteLen(o?t.replace(e.HTML,""):t);return t+this.repeatStr(n,r-i)},e.repeatStr=function(e,t){for(var r="",n=0;t>n;n++)r+=e;return r},e.addColor=function(e,t){var r;return"string"==typeof t?r=String(t):"number"==typeof t&&(r=Number(t).toString(10)),'<font color="'+r+'">'+e+"</font>"},e.addColor1=function(e,t){var r=new Object;return r.style=new Object,r.text=e,r.textColor=Number(t).toString(16),r},e.substitute=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=e.match(/%s/g);if(n&&n.length)for(var o=n.length,i=0;o>i;i++)e=e.replace(n[i],t[i]);return e},e.substr=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e.replace(/{\d+}/g,function(e){return t[e.match(/\d+/g)[0]]})},e.replaceStr=function(e,t,r){if(-1==e.indexOf(t))return e;var n=e.split(t);return n[0]+r+n[1]},e.getStrColor=function(e){for(var t=[],r=e.indexOf("0x"),n=r,o="",i="";-1!=n;)o=e.substring(r,r+8),t.push(o),r+=8,i=e.substring(r),n=i.indexOf("0x"),r+=n;return t},e.replaceStrColor=function(e,t){var r=e.indexOf("0x"),n=r,o="",i="",s=0,a=[];"string"==typeof t?a.push(t):(a=t,s=a.length);for(var u=0;-1!=n;)o=e.substring(r,r+8),e=e.replace(o,a[u]),s>u&&u++,r+=8,i=e.substring(r),n=i.indexOf("0x"),r+=n;return e},e.replace=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++)e=e.replace("%s",t[n]+"");return e},e.getStrByRegExp=function(e,t){void 0===t&&(t=/\d+/g);var r=[];e.replace(t,function(){return r.push(arguments[0]),"number"==typeof arguments[0]?arguments[0].toString():arguments[0]});return r},e.formalName=function(e){return e=e.replace(/\|/g,"｜"),e=e.replace(/</g,"＜"),e=e.replace(/>/g,"＞")},e.ChineseToNumber=function(t){if(!e.chnNumCharCN){e.chnNumCharCN={};for(var r=0;9>=r;r++)e.chnNumCharCN[LangMgr.getValueByKey("chinese"+r)]=r}e.chnNameValueCN||(e.chnNameValueCN={},e.chnNameValueCN[LangMgr.getValueByKey("chnUnitChar1")]={value:10,secUnit:!1},e.chnNameValueCN[LangMgr.getValueByKey("chnUnitChar2")]={value:100,secUnit:!1},e.chnNameValueCN[LangMgr.getValueByKey("chnUnitChar3")]={value:1e3,secUnit:!1},e.chnNameValueCN[LangMgr.getValueByKey("chnUnitSection1")]={value:1e4,secUnit:!0},e.chnNameValueCN[LangMgr.getValueByKey("chnUnitSection2")]={value:1e8,secUnit:!0});for(var n=0,o=0,i=0,s=!1,a=t.split(""),r=0;r<a.length;r++){var u=e.chnNumCharCN[a[r]];if("undefined"!=typeof u)i=u,r===a.length-1&&(o+=i);else{var c=e.chnNameValueCN[a[r]].value;s=e.chnNameValueCN[a[r]].secUnit,s?(o=(o+i)*c,n+=o,o=0):o+=i*c,i=0}}return n+o},e.NumberToChinese=function(t){var r=0,n="",o="",i=!1,s=t;if(0===t)return LangMgr.getValueByKey("chinese0");for(;t>0;){var a=t%1e4;i&&(o=LangMgr.getValueByKey("chinese0")+o),n=e.SectionToChinese(a),n+=0==a?"":LangMgr.getValueByKey("chnUnitSection"+r),o=n+o,i=1e3>a&&a>0,t=Math.floor(t/1e4),r++}return s/100>>0==0&&s/10>>0!=0&&LangMgr.getValueByKey("chinese1")==o[0]&&(o=o.substr(1)),o},e.SectionToChinese=function(e){for(var t="",r="",n=0,o=!0;e>0;){var i=e%10;0===i?o||(o=!0,r=LangMgr.getValueByKey("chinese"+i)+r):(o=!1,t=LangMgr.getValueByKey("chinese"+i),t+=LangMgr.getValueByKey("chnUnitChar"+n),r=t+r),n++,e=Math.floor(e/10)}return r},e.strLeachNum=function(e,t,r){void 0===r&&(r="*");for(var n=e.split(/\D/),o="",i=0;i<n.length;i++)""!=n[i]&&(o+=n[i]);return o.length>=t&&(e=e.replace(/^\d+$/,r)),e},e.getChineseWeek=function(e){for(var t="",r=0;r<e.length;r++)t+=LangMgr.getValueByKey("weekStr"+e[r]);return t},e.HTML=/<[^>]+>/g,e.LuoMaNumbers=["","Ⅰ","Ⅱ","Ⅲ","Ⅳ","Ⅴ","Ⅵ","Ⅶ","Ⅷ","Ⅸ","Ⅹ"],e.REG_NUM=/\d+/g,e}();__reflect(StringUtils.prototype,"StringUtils");var TextUtils=function(){function e(){}return e.generateTextFlow=function(t){if(!t)return(new egret.HtmlTextParser).parser("");for(var r,n=t.split("|"),o="",i=0,s=n.length;s>i;i++)o+=e.getSingleTextFlow1(n[i]);try{r=(new egret.HtmlTextParser).parser(o)}catch(a){return debug.log("Html text error"),(new egret.HtmlTextParser).parser("")}return r},e.generateTextFlow1=function(t){if(!t)return(new egret.HtmlTextParser).parser("");for(var r=t.split("|"),n=[],o=0,i=r.length;i>o;o++){var s=e.getSingleTextFlow(r[o]);s.text&&""!=s.text&&n.push(s)}return n},e.getSingleTextFlow1=function(t){var r=t.split("&T:",2);if(2==r.length){for(var n="<font",o=r[0].split("&"),i=void 0,s=!1,a=0,u=o.length;u>a;a++)switch(i=o[a].split(":"),i[0]){case e.STYLE_SIZE:n+=' size="'+Math.floor(+i[1])+'"';break;case e.STYLE_COLOR:n+=' color="'+Math.floor(+i[1])+'"';break;case e.UNDERLINE_TEXT:s=!0}return n+=s?"><u>"+r[1]+"</u></font>":">"+r[1]+"</font>"}return"<font>"+t+"</font>"},e.getSingleTextFlow=function(t){var r=t.split("&T:",2),n={style:{}};if(2==r.length){for(var o=(r[0],t.split("&")),i=void 0,s=0,a=o.length;a>s;s++)switch(i=o[s].split(":"),i[0]){case e.STYLE_SIZE:n.style.size=+i[1];break;case e.STYLE_COLOR:n.style.textColor=+i[1];
break;case e.UNDERLINE_TEXT:n.style.underline=!0;break;case e.EVENT:n.style.href="event:"+i[1]}n.text=r[1]}else n.text=t;return n},e.generateTextFlow2=function(t,r){if(void 0===r&&(r=-1),!t)return(new egret.HtmlTextParser).parser("");for(var n,o=t.split("|"),i="",s=0,a=0,u=o.length;u>a;a++){var c=o[a];c.indexOf("&T:")>=0?(s++,i+="<font "):s>0&&(s--,i+="</font>"),i+=e.getSingleTextFlow2(o[a],r)}for(;s>0;)i+="</font>",s--;try{n=(new egret.HtmlTextParser).parser(i)}catch(h){return debug.log("Html text error"),void(new egret.HtmlTextParser).parser("")}return n},e.getSingleTextFlow2=function(t,r){void 0===r&&(r=-1);var n=t.split("&T:",2);if(2==n.length){for(var o="",i=n[0].split("&"),s=void 0,a=!1,u=0,c=i.length;c>u;u++)switch(s=i[u].split(":"),s[0]){case e.STYLE_SIZE:o+=' size="'+Math.floor(+s[1])+'"';break;case e.STYLE_COLOR:o+=' color="'+(r>=0?r:Math.floor(+s[1]))+'"';break;case e.UNDERLINE_TEXT:a=!0}return o+=a?"><u>"+n[1]+"</u>":">"+n[1]}return t},e.getChineseNum=function(e){return LangMgr.getValueByKey("chinese"+e)},e.formatUnderLineStr=function(e,t){return(new egret.HtmlTextParser).parser('<a href="event:"'+t+"><u>"+e+"</u></a>")},e.STYLE_COLOR="C",e.STYLE_SIZE="S",e.PROP_TEXT="T",e.UNDERLINE_TEXT="U",e.EVENT="E",e.ITEMID="D",e.ITEMCOUNT="C",e}();__reflect(TextUtils.prototype,"TextUtils");var TweenUtil=function(){function e(){}return e.FadeOut=function(e,t,r){if(e&&t){var n=egret.Tween.get(e),o=r?r.time||500:500;n.to({alpha:0},o).call(function(){egret.Tween.removeTweens(e),r&&r.callFun&&r.callFun.call(t,r.args)},t)}},e.FadeIn=function(e,t,r){if(e&&t){var n=egret.Tween.get(e),o=r?r.time||500:500;n.to({alpha:1},o).call(function(){egret.Tween.removeTweens(e),r&&r.callFun&&r.callFun.call(t,r.args)},t)}},e.LineTo=function(e,t,r,n,o){void 0==n&&(n=egret.MainContext.instance.stage),e.parent&&e.parent.removeChild(e);var i=t.localToGlobal(t.x,t.y);n.globalToLocal(i.x,i.y,i);var s=r.localToGlobal(r.x,r.y);n.globalToLocal(s.x,s.y,s),e.x=i.x,e.y=i.y,n.addChild(e);var a=o?o.time||500:500;egret.Tween.get(e).to({x:s.x,y:s.y},a,egret.Ease.sineOut).call(function(){egret.Tween.removeTweens(e),e&&e.parent&&e.parent.removeChild(e),o&&o.callFun&&o.objthis&&o.callFun.call(o.objthis,o.args)},n)},e.JumpAniByBottom=function(e,t,r,n){void 0===t&&(t=900),void 0===n&&(n=egret.Ease.bounceOut);var o=r?r:500;e.bottom=t,egret.Tween.get(e).to({bottom:0},o,n).call(function(){e&&egret.Tween.removeTweens(e)})},e.ListAnimation=function(e,t,r,n,o,i){void 0===t&&(t=1),void 0===r&&(r=70),void 0===n&&(n=1),void 0===o&&(o="tweenGroup"),e.validateNow(),e.touchEnabled=!1;for(var s=Math.min(e.numChildren,8),a=0,u=0;s>u;u++){var c=e.getChildAt(u),h=c[o];if(!h)return void console.log("not tweenGroup!!!");var l=h.x,f=h.y;i&&(l=i.x,f=i.y);var g=egret.Ease.sineOut;switch(t){case 1:h.x-=c.width;break;case 2:(u+1)%2==0?h.x-=c.width:h.x=c.width;break;case 3:h.y+=c.height;break;case 4:h.x+=c.width;break;case 5:h.y-=c.width;break;case 6:h.scaleX=h.scaleY=3,g=egret.Ease.quartIn;break;case 7:h.scaleX=h.scaleY=.1,g=egret.Ease.quartIn}h.alpha=n,egret.Tween.removeTweens(h),egret.Tween.get(h).to({x:l,y:f,scaleX:1,scaleY:1,alpha:1},100+u*r,g).call(function(){a++,a>=s&&(e.touchEnabled=!0)})}},e}();__reflect(TweenUtil.prototype,"TweenUtil");var RecycleMgr=function(e){function t(){var t=e.call(this)||this;return t.isFirstEnter=!0,t.resDisTime={},t.imageTotalSize=0,t.images=[],t.jsons=[],t.sheets=[],t.fonts=[],t}return __extends(t,e),r=t,t.ins=function(){return e.ins.call(this)},t.prototype.addImage=function(e,t){r.ins().images[e]&&console.error("资源重复:",e),r.ins().images[e]=t;var n=t.texture,o=0;if(n instanceof egret.Texture){o=n.$bitmapWidth*n.$bitmapHeight*4,this.imageTotalSize+=o;var i=this.getTextureHashCode(n);i&&this.resDisTime[i]&&delete this.resDisTime[i]}},t.prototype.delImage=function(e){var t=r.ins().images[e];if(!t)return void console.error("资源不存在:",e);delete r.ins().images[e];var n=t.texture,o=0;n instanceof egret.Texture&&(o=n.$bitmapWidth*n.$bitmapHeight*4,this.imageTotalSize-=o)},t.prototype.start=function(){var e=this;TimerMgr.ins().doTimer(5e3,0,function(){e.destroy()},this)},t.prototype.destroy=function(){this.isFirstEnter?(this.isFirstEnter=!1,this.start()):this.destroyRes()},t.prototype.destroyWin=function(){},t.prototype.disposeResTime=function(e){this.resDisTime[e]=egret.getTimer()},t.prototype.destroyRes=function(){var e=[];for(var t in this.resDisTime){var n=this.resDisTime[t];e.push({code:t,disTime:n})}e.sort(function(e,t){return e.disTime-t.disTime});var o={};for(var i in this.images){var s=this.images[i];if(s.texture&&s.resource){var t=this.getTextureHashCode(s.texture);o[t]=s}else delete this.images[i]}for(var a=0;a<e.length;a++){var u=e[a],s=o[u.code];if(s){if(!(s.resource.url.indexOf(PATH_PUBLIC)>=0||s.resource.url.indexOf(PATH_MAP)>=0)){if(this.imageTotalSize<r.MaxImageSize)break;var i=s.resource.name;this.checkCanDestroy(u.code)&&(this.sheets[i]?(RES.hasRes(this.sheets[i])&&RES.destroyRes(this.sheets[i]),delete this.sheets[i]):this.fonts[i]?(RES.hasRes(this.fonts[i])&&RES.destroyRes(this.fonts[i]),delete this.fonts[i]):this.destoryMc(i))}}else delete this.resDisTime[u.code]}},t.prototype.checkCanDestroy=function(e){var t=egret.BitmapData._displayList[e],r=GameMovieClip.displayList[e];return t&&t.length||r&&r.length?(this.resDisTime[e]&&delete this.resDisTime[e],!1):this.resDisTime[e]?(delete egret.BitmapData._displayList[e],delete GameMovieClip.displayList[e],delete GameMovieClip.factoryDic[e],delete this.resDisTime[e],!0):!0},t.prototype.destroyMapFile=function(e){},t.prototype.destoryMc=function(e){RES.hasRes(e)?RES.destroyRes(e):delete this.images[e],this.destoryJson(e)},t.prototype.destoryJson=function(e){var t=e.replace(".png",".json");this.jsons[t]&&(RES.hasRes(t)?RES.destroyRes(t):delete this.jsons[t])},t.prototype.getTextureHashCode=function(e){var t=e.hashCode;return e.bitmapData&&e.bitmapData.hashCode&&(t=e.bitmapData.hashCode),t},t.prototype.reloadContainer=function(e,t){void 0===t&&(t=!1);for(var r=e.numChildren,n=0;r>n;n++){var o=e.getChildAt(n);o instanceof eui.Image?this.reloadImg(o):t&&o instanceof GameMovieClip?o.name&&-1==o.playCount&&o.playFile(o.name,o.playCount):o instanceof egret.DisplayObjectContainer&&this.reloadContainer(o,t)}},t.prototype.reloadImg=function(e){if(e){var t=e.source;if(t){if(e.texture&&e.texture.bitmapData)return;e.source=null,e.source=t}}},t.prototype.fontGetTexturePath=function(e,t){var r="",n=t.split("\n"),o=n[2],i=o.indexOf('file="');return-1!=i&&(o=o.substring(i+6),i=o.indexOf('"'),r=o.substring(0,i)),e=e.split("\\").join("/"),i=e.lastIndexOf("/"),e=-1!=i?e.substring(0,i+1)+r:r},t.MaxImageSize=209715200,__decorate([callLater],t.prototype,"destroyRes",null),t=r=__decorate([recycle],t);var r}(SingleClass);__reflect(RecycleMgr.prototype,"RecycleMgr");